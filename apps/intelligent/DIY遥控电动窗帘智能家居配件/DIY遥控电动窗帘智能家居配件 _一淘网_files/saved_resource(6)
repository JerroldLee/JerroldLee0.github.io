KISSY.add("components/top-bar/index",function(a,b,c){function d(a){var b=this;d.superclass.constructor.call(b,a),b._init()}var e=b.all;return a.extend(d,c,{_init:function(){var b=this,c=e(b.get("target"));if(!a.UA.ie||a.UA.ie>6){var d=e("#J_tab").offset().top;b._regScroll(d),b._regLabelEvent(),b._regDiscountBuy(),b._regMobileBuy(),window.globalEvent.on("panelLabelChange",function(a){b._go(a.index)}),window.globalEvent.on("quanChange",function(a){if(window.codePlan){var b=codePlan[a.index]["final"];c.one(".price").html("\uffe5"+b)}})}},_regScroll:function(b){a.one(window).on("scroll",function(){var a=KISSY.one(window).scrollTop();a>b?e("#top-bar").show():e("#top-bar").hide()})},_regLabelEvent:function(){var a=this,b=e(a.get("target"));b.delegate("click",".label",function(a){var c=e(a.currentTarget),d=c.attr("label-id");if(!c.hasClass("blue")){{var f=b.one(".blue");f.attr("label-id")}f.removeClass("blue").removeClass("cur-label"),c.addClass("blue").addClass("cur-label");var g=window.globalEvent;g&&g.fire("topLabelChange",{index:parseInt(d)})}})},_regDiscountBuy:function(){var a=this,b=e(a.get("target"));b.delegate("click",".t-discount-buy",function(a){var b=e(a.currentTarget);if(!b.attr("href")){a.preventDefault();var c=window.globalEvent;c&&c.fire("discountBuyClick")}})},_regMobileBuy:function(){var a=this,b=e(a.get("target"));b.delegate("click",".t-mobile-buy",function(a){a.preventDefault();var b=window.globalEvent;b&&b.fire("discountMobileClick")})},_go:function(a){{var b=this,c=e(b.get("target")),d=c.one(".blue");d.attr("label-id")}d.removeClass("blue").removeClass("cur-label"),btnList=c.all(".label");var f;btnList.each(function(b){b.attr("label-id")==a&&(f=b)}),f.addClass("blue").addClass("cur-label")}},{ATTRS:{target:{value:"#top-bar"}}}),d},{requires:["node","base","./index.css"]});