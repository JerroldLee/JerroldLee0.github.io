function postCORS(a,b,c,d){var e=createCORSRequest(),f=function(a){return"[object Array]"===Object.prototype.toString.call(a)};if(e){d&&d.charset&&(a+=-1!==a.indexOf("?")?"&"+d.charset:"?"+d.charset),e.open("POST",a),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d&&d.withCookie&&(e.withCredentials=!0),e.onreadystatechange=function(){var a={isXhr:!0};4==e.readyState&&(200==e.status||304==e.status?(a.status="success",b(e.responseText,a)):(a.status="error",b(e,a)))};var g=[];for(var h in c)if(c.hasOwnProperty(h))if(f(c[h])){if(!d||d&&d.traditional===!1)var i=h+"[]";else var i=h;for(var j=0,k=c[h].length;k>j;j++)g.push(encodeURIComponent(i)+"="+encodeURIComponent(c[h][j]))}else g.push(encodeURIComponent(h)+"="+encodeURIComponent(c[h]));e.send(g.join("&"))}else{var l=new Transfer(a,function(a){b(a,{isHxr:!1})},{params:c},d);l.send()}}function createCORSRequest(){var a;try{a=new XMLHttpRequest,"withCredentials"in a||(a=null)}catch(b){a=null}return a}function Transfer(a,b,c,d){this.url=a,this.callback=b;var e={localProxy:"/favicon.ico",defaultName:"cross.default.name"};this.options=this.extend(e,c),this.extra=d,this.init()}function findForumBox(){return new Popbox({el:function(){return pc.getElem("#JfindforumsWrap").innerHTML},style:{width:"770px",border:"0",background:"none",borderRadius:"none",boxShadow:"none"},events:{"click#switchMenu":function(a,b){pc.each(pc.getElems("#Jfindforumlist .menu"),function(a){pc.removeClass(a,"menu-current")}),pc.addClass(b,"menu-current"),pc.each(pc.getElems("#Jfindforumlist .view"),function(a){pc.hide(a)});var c=b.getAttribute("data-var"),d=pc.getElem("#Jfindforumlist .findforum_"+c);d&&pc.show(d)},"click#popClose":function(a,b){this.remove()}},needShortCut:!0}).show()}function searchJs(a){this.father=pc.getElem(a),this.stype=pc.getElem(".type",this.father),this.typelink=pc.getElems("a",this.stype),this.sinput=pc.getElem(".search-ipt",this.father),this.sfid=pc.getElem(".search-fid",this.father),this.sscope=pc.getElem("#searchScope"),this.svalue=pc.getElem("#forumValue"),this.run=function(){var a=this;"undefined"!=typeof pageGlobal.fid&&(a.svalue.value=pageGlobal.fid,a.sinput.setAttribute("data-fid",pageGlobal.fid)),""!=a.sinput.value&&pc(a.father).addClass("searching"),pc.addEvent(a.sinput,"focus",function(){pc(a.father).addClass("searching")}),pc.addEvent(a.sinput,"blur",function(){""==a.sinput.value&&pc(a.father).removeClass("searching")}),commonJs.triggleDisplay(a.stype,pc.getElem("dd",a.stype)),pc.each(a.typelink,function(b){pc.addEvent(b,"click",function(){pc.hasClass(b,"first")||(pc.getElem("dt",a.stype).innerHTML=b.innerHTML,a.sscope.value=b.getAttribute("data-scope"),b.getAttribute("data-fid")&&(a.svalue.value=b.getAttribute("data-fid")),pc.each(a.typelink,function(a){pc(a).removeClass("first")}),pc.prependChild(pc.getElem("dd",a.stype),b),pc(b).addClass("first")),pc.hide(pc.getElem("dd",a.stype)),a.sinput.focus()})})}}function poptip(){this.init.apply(this,arguments)}function popiframe(a,b){if(null==pc.getElem("#Jpopiframe")){var c='<div class="popiframe" id="Jpopiframe"><div class="pop-header"><span class="pop-header-title">'+a+'</span><a class="pop-header-close" href="javascript:;" id="JcloseIframe"></a></div><div class="pop-body"><div class="pop-loading" id="Jpoploading">数据加载中...</div><iframe frameborder="0" hspace="0" src="'+b+'" id="iframebody" onload="openiframe()" style="width:700px;height:340px;"></iframe></div></div>',d=toolJs.domGenerator(c);document.body.appendChild(d),pc.addEvent(pc.getElem("#JcloseIframe"),"click",function(){document.body.removeChild(d)})}}function openiframe(){pc.hide(pc.getElem("#Jpoploading"))}function popform(a){return this.config=a||{},this.postdata=a&&a.postdata||{},this.init()}function uploadResize(a){var b=118,c=90;if(a.width>b||a.height>c){var d=a.width/b,e=a.height/c,f=a.width,g=a.height;d>e?(a.width=b,a.height=g/d):(a.height=c,a.width=f/e)}}function createSWF(a){var b={application:"itbbs",keepSrc:keepSrc,readExif:readExif};return b[pageGlobal.sessionname]=pc.getCookie(pageGlobal.sessionname),new SWFUpload({upload_url:upload_url,post_params:b,file_size_limit:"5MB",file_types:"*.jpg;*.gif;*.jpeg;*.png;",file_types_description:"All Files",file_upload_limit:"0",file_queue_limit:1,use_query_string:!0,swfupload_preload_handler:preLoad,swfupload_load_failed_handler:loadFailed,file_queue_error_handler:fileQueueError,file_dialog_complete_handler:fileDialogComplete,upload_progress_handler:uploadProgress,upload_error_handler:uploadError,upload_success_handler:uploadSuccess,upload_complete_handler:uploadComplete,button_placeholder_id:a.id,button_width:a.width,button_height:a.height,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_cursor:SWFUpload.CURSOR.HAND,flash_url:commonVar.swfuploadFlash,flash9_url:commonVar.swfuploadFlash9,custom_settings:{postId:a.postId,upload_target:a.targetId,resizedImgWidth:1e3,resizedImgHeight:750,resizedImgQuality:100,resizedImgCondition:resizedImgCondition},debug:!1})}function preLoad(){return this.support.loading?!0:(alert("You need the Flash Player 9.028 or above to use SWFUpload."),!1)}function loadFailed(){alert("Something went wrong while loading SWFUpload. If this were a real application we'd clean up and then give you an alternative")}function fileQueueError(a,b,c){try{switch(b){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:commonJs.alertMessage("只能上传一张图片");break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:commonJs.alertMessage("图片超过5M，请调整大小后再上传");break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:commonJs.alertMessage("不支持此格式文件");break;default:commonJs.alertMessage("系统错误，请联系管理员, 错误码:"+b+";"+c)}}catch(d){this.debug(d)}var e=pc.getElem("#"+this.settings.custom_settings.upload_target);e&&pc.hide(e)}function fileDialogComplete(a,b,c){if(b>0){var d=pc.getElem("#"+this.settings.custom_settings.upload_target);if(d){var e='<i class="before"></i><div class="loading"><span class="uploadpersen">已上传<i>0</i>%</span><em class="uploadbar"><i></i></em></div>';d.innerHTML=e,pc.show(d),this.startResizedUpload(this.getFile(0).ID,this.customSettings.resizedImgWidth,this.customSettings.resizedImgHeight,SWFUpload.RESIZE_ENCODING.JPEG,this.customSettings.resizedImgQuality,!1,this.customSettings.resizedImgCondition)}}}function uploadProgress(a,b){var c=pc.getElem("#"+this.settings.custom_settings.upload_target);if(c){var d=Math.ceil(b/a.size*100)<=100?Math.ceil(b/a.size*100):100;pc.getElem(".uploadpersen i",c).innerHTML=d,pc.getElem(".uploadbar i",c).style.width=d+"%"}}function uploadError(a,b,c){switch(b){case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:commonJs.alertMessage("图片超过5M，请调整大小后再上传");break;case SWFUpload.UPLOAD_ERROR.RESIZE:commonJs.alertMessage("可能是你的图片尺寸过大，请调整后再上传");break;default:commonJs.alertMessage("系统错误，请联系管理员, 错误码:"+b+";"+c)}var d=pc.getElem("#"+this.settings.custom_settings.upload_target);d&&pc.hide(d)}function uploadSuccess(file,serverData){var self=this,uploadWrap=pc.getElem("#"+this.settings.custom_settings.upload_target);if(uploadWrap){var data=eval("("+serverData+")");switch(data.retCode){case 0:var files=data.files,syncfiles=null;for(var j in files)-1!=files[j].url.indexOf("1024x1024")&&(syncfiles=files[j]);syncfiles||(syncfiles=files.length>1?files[files.length-2]:files[0]);var uploadimgHTML='<i class="before"></i><i class="close"></i><div class="uploadimgwrap"><img src="'+files[0].url+'" alt="" onload="uploadResize(this)"></div><div class="uploadtip">图片已上传至正文末尾</div>';uploadWrap.innerHTML=uploadimgHTML,upload_Img[this.settings.custom_settings.postId]=syncfiles.url,pc.addEvent(pc.getElem(".close",uploadWrap),"click",function(){uploadWrap.innerHTML="",pc.hide(uploadWrap),upload_Img[self.settings.custom_settings.postId]=null});break;case 5:case 14:commonJs.alertMessage("图片超过5M，请调整大小后再上传");break;case 6:commonJs.alertMessage("GIF图片尺寸不能超过150");break;case 12:commonJs.alertMessage("未登录或超时，请先登录");break;case 21:commonJs.alertMessage("不支持此格式文件");break;default:commonJs.alertMessage("系统错误，请联系管理员, 错误码:"+data.retCode)}}}function uploadComplete(a){}function focusJs(a,b,c,d){this.btnobj=a,this.focusid=b,this.focusname=c,this.fansobj=d,this.isactive=!1,this.init()}function medalJs(a,b){this.medalbox=a,this.medals=pc.getElems("img",a),this.medallength=pc.getElems("img",a).length,this.shownum=b||5,this.init()}function viewTopicpic(a){var b="";if(a.getAttribute("data-pic")){var c=a.getAttribute("data-pic"),d=c.split("-")[0],e=c.split("-")[1],f=c.split("-")[2],g=pageGlobal.uid;b=f==g&&topicGlobal.allowpicview?pageGlobal.root+topicGlobal.photourl+"?fid="+pageGlobal.fid+"&tid="+pageGlobal.tid+"&pid="+d+"&seq="+e:pageGlobal.root+topicGlobal.viewpicurl+"?fid="+pageGlobal.fid+"&imgUrl="+a.src,window.open(b)}else b=pageGlobal.root+topicGlobal.viewpicurl+"?fid="+pageGlobal.fid+"&imgUrl="+a.src,window.open(b)}function viewPicExif(a,b){var c=a.getAttribute("src2"),d=c.lastIndexOf(".")-c.lastIndexOf("/"),e=c.substr(c.lastIndexOf("/")+1,d-1),f=document.getElementById(e);if(""!=e&&f){var g=f.innerHTML.split(",");pc.addEvent(a,"mouseover",function(){var a=pc.getElem("#exif_"+e);if(!a){var c='<div class="exifbox" id="exif_'+e+'"><span class="mark">Exif</span><div class="exifctn"></div></div>';a=toolJs.domGenerator(c);for(var d="",h=0;h<g.length;h++)d+="<p>"+g[h]+"</p>";pc.getElem(".exifctn",a).innerHTML=d,pc.getElem(".doc").appendChild(a),commonJs.triggleDisplay(a,a),commonJs.hoverClass(a,"exifbox-show",!1),f.parentNode.removeChild(f)}var i=toolJs.getOffset(this).left,j=toolJs.getOffset(this).top;pc.setStyle(a,{left:i+10+"px",top:j+b-40+"px"}),pc.show(a)}),pc.addEvent(a,"mouseout",function(){var a=pc.getElem("#exif_"+e);a&&pc.hide(a)})}}function ubbImgResize(a,b,c){b.style.width?parseInt(b.style.width)>c&&(b.style.width=c+"px",b.style.height=Math.floor(a.height/(a.width/c))+"px",d=Math.floor(a.height/(a.width/c))):a.width>c&&(b.style.width=c+"px",b.style.height=Math.floor(a.height/(a.width/c))+"px",d=Math.floor(a.height/(a.width/c)));var d=b.style.height?parseInt(b.style.height):a.height;viewPicExif(b,d),topicGlobal&&(b.title="点击查看原图",pc.addEvent(b,"click",function(){viewTopicpic(b)}))}function lazycreate(a,b){var c=function(a,c){ubbImgResize(a,c,b)};Lazy.create({lazyId:a,trueSrc:"src2",callBack:c,offset:1500})}var viewCountUrl="",viewCountIntf="intf/topic/counter.ajax";"forum"==pageGlobal.pagetype?viewCountUrl=pageGlobal.root+viewCountIntf+"?fid="+pageGlobal.fid+"&currentUrl="+encodeURI(location.href)+"&currentReferer="+encodeURI(document.referrer)+"&"+(new Date).getTime():("topic"==pageGlobal.pagetype||"photo"==pageGlobal.pagetype)&&(viewCountUrl=pageGlobal.root+viewCountIntf+"?tid="+pageGlobal.tid+"&fid="+pageGlobal.fid+"&currentUrl="+encodeURI(location.href)+"&currentReferer="+encodeURI(document.referrer)+"&"+(new Date).getTime()),""!=viewCountUrl&&("topic"==pageGlobal.pagetype?pc.get(viewCountUrl,function(a){var b=new Function("","return "+a)();pc.getElem("#Jtopicvcount")&&(pc.getElem("#Jtopicvcount").innerHTML=b.views)}):pc.get(viewCountUrl));var commonVar={ubbSrc:"http://js.3conline.com/bbs/pconline/2014/js/plug/ubb_new.min.js",adminSrc:"http://js.3conline.com/bbs/pconline/2014/js/block/adminJs.min.js",fixpngSrc:"http://js.3conline.com/bbs/pconline/2014/js/plug/belatedPNG.min.js",captchaSrc:"http://captcha.pconline.com.cn/captcha/v.jpg",userjsonSrc:"action/user/user_json.jsp",zeroClipboardSwf:"http://www1.pconline.com.cn/bbs/2014/forum/other/ZeroClipboard.swf",swfuploadFlash:"/flash/swfupload.swf",swfuploadFlash9:"/flash/swfupload_fp9.swf",meituSwf:"http://www1.pconline.com.cn/flash/141023/meitu/1016x650.swf",sendTxt:"发送",sendingTxt:"发送中...",reason:["发布广告","恶意灌水","内容违规","攻击他人","内容丰富","主题新颖","发错版块"]},Lazy={eCatch:{},eHandle:0,isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},addEvent:function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c),this.eCatch[++this.eHandle]={handler:c},this.eHandle},removeEvent:function(a,b,c){a.addEventListener?a.removeEventListener(b,this.eCatch[c].handler,!1):a.detachEvent("on"+b,this.eCatch[c].handler)},$$:function(a){return"object"==typeof a?a:document.getElementById(a)},converNodeToArray:function(a){var b=[];try{b=Array.prototype.slice.call(a,0)}catch(c){for(var d=0,e=a.length;e>d;d++)b.push(a[d])}return b},each:function(a,b){for(var c=0,d=a.length;d>c;c++)b.call(a[c],c,a[c])},create:function(a){var b=this;a.loading=!1,a.timmer=void 0,a.time_act=0,a.delay=a.delay||100,a.delay_tot=a.delay_tot||1e3,a.imgList=[];var c=a.lazyId,d=[];if(c="string"==typeof c?[].concat(c):c,b.each(c,function(a,c){var e=document.getElementById(c);if(e){var f;f=document.querySelectorAll?document.querySelectorAll("#"+c+" img"):e.getElementsByTagName("img"),d=d.concat(f&&b.converNodeToArray(f))}}),b.each(d,function(b,c){c.getAttribute(a.trueSrc)&&a.imgList.push(c)}),a.imgCount=a.imgList.length,a.jsList){a.jsCount=a.jsList.length;for(var e=0;e<a.jsCount;e++)a.jsList[e].oDom="object"==typeof a.jsList[e].id?a.jsList[e].id:document.getElementById(a.jsList[e].id)}else a.jsList=[],a.jsCount=0;return this.init(a),a},checkPhone:function(a){a.indexOf("android")>-1||a.indexOf("iphone")>-1||a.indexOf("ipod")>-1||a.indexOf("ipad")>-1?this.isPhone=!0:this.isPhone=!1},checkLazyLoad:function(a){return a.indexOf("opera mini")>-1?!1:!0},init:function(a){if(a.unNeedListen)return void this.loadOnce(a);if(0!=a.imgCount||0!=a.jsCount){var b=navigator.userAgent.toLowerCase();this.checkLazyLoad(b)?(this.checkPhone(b),a.e1=this.addEvent(window,"scroll",this.load(a)),a.e2=this.addEvent(window,"touchmove",this.load(a)),a.e3=this.addEvent(window,"touchend",this.load(a)),this.loadTime(a)):this.loadOnce(a)}},getYGetBound:function(a,b){var c=a.getBoundingClientRect().top||0;return 0==c?null:c+b},getYOffSet:function(a){for(var b=0;a.offsetParent;)b+=a.offsetTop,a=a.offsetParent;return 0==b?null:b},getHideY:function(a,b,c){for(;a&&a!==document;){var d=b(a,c);if(null!=d)return d;a=a.parentNode}return 0},getY:function(a,b){var c;return c=a.getBoundingClientRect?this.getHideY(a,this.getYGetBound,b):this.getHideY(a,this.getYOffSet)},load:function(a){return function(){1!=a.loading&&(a.loading=!0,a.time_act&&1*new Date-a.time_act>a.delay_tot?(a.timmer&&clearTimeout(a.timmer),Lazy.loadTime(a)):(a.timmer&&clearTimeout(a.timmer),a.timmer=setTimeout(function(){Lazy.loadTime(a)},a.delay)),a.loading=!1)}},setSrc:function(a,b,c){var d=a.getAttribute(b),e=new Image;e.onload=function(){c&&c(e,a),a.setAttribute("src",d),a.removeAttribute(b)},e.src=d},setJs:function(js){Lazy.isFunction(js)?js.call(this):eval(js)},loadTime:function(a){a.time_act=1*new Date;var b,c,d;if(this.isPhone?(b=document.documentElement.clientHeight,c=window.scrollY,d=b+c):(b=document.documentElement.clientHeight||document.body.clientHeight,c=Math.max(document.documentElement.scrollTop,document.body.scrollTop),d=b+c),a.offset=a.offset||b,a.preOffset=a.preOffset||b,a.imgCount){for(var e=[],f=0;f<a.imgCount;f++){var g,h=a.imgList[f],g=this.getY(h,c);g>c-a.preOffset&&g<d+a.offset&&(g>c&&d>g?this.setSrc(h,a.trueSrc,a.callBack):e.push(h),a.imgList.splice(f,1),f--,a.imgCount--)}var i=e.length;if(i)for(var f=0;i>f;f++){var h=e[f];this.setSrc(h,a.trueSrc,a.callBack)}}if(a.jsCount)for(var f=0;f<a.jsCount;f++){var j=a.jsList[f],k=this.getY(j.oDom,c);k<d+a.offset&&(this.setJs.call(j.oDom,j.js),a.jsList.splice(f,1),f--,a.jsCount--)}0==a.imgCount&&0==a.jsCount&&(this.removeEvent(window,"scroll",a.e1),this.removeEvent(window,"touchmove",a.e2),this.removeEvent(window,"touchend",a.e3))},loadOnce:function(a){for(var b=0;b<a.imgCount;b++){var c=a.imgList[b];this.setSrc(c,a.trueSrc,a.callBack)}if(a.jsList)for(var b=0;b<a.jsCount;b++){var d=a.jsList[b];this.setJs.call(d.oDom,d.js)}}};Transfer.prototype={init:function(){function a(a,b){var c=null;try{c=document.createElement("<"+a+' name="'+b+'">')}catch(d){}return c&&c.nodeName==a.toUpperCase()||(c=document.createElement(a),c.name=b),c}this.params=this.options.params||{},this.params.windowname=1,delete this.options.params,this.files=this.options.files||[],delete this.options.files;var b="transfer_"+(new Date).getTime();this.options.defaultName=b;var c=a("iframe",b);c.name=b,c.style.display="none",c.style.position="fixed",c.style.top=c.style.left="-10000px",document.body.appendChild(c);var d=document.createElement("form");d.style.display="none",d.target=b,d.action=this.url,d.method="post",d.encoding=d.enctype="application/x-www-form-urlencoded",document.body.appendChild(d),this.frame=c,this.form=d,this.state=1,this._setRequest()},_setRequest:function(){function a(){var a;try{a=f.contentWindow.name}catch(b){a=h.defaultName}a==h.defaultName&&(a='{"error": 1}'),e.callback(a)}function b(){var a=!1;try{a=f.contentWindow.location.host==location.host}catch(b){}return a}function c(){if(clearTimeout(j),f.onreadystatechange=f.onload=null,f.parentNode.removeChild(f),g){for(var a,b=0,c=e._files.length;c>b;b++)a=e._files[b],a[2].insertBefore(a[0],a[1]),a[2].removeChild(a[1]);a=null,e._files=[],g.parentNode.removeChild(g)}f=null,g=null;for(var d in e)e.hasOwnProperty(d)&&(e[d]=null,delete e[d])}function d(){try{if("about:blank"==f.contentWindow.location.href)return}catch(d){}if(3==e.state)if(b()||k){if(f.readyState&&!/complete|loaded/i.test(f.readyState))return;a(),c()}else k=!0,f.contentWindow.location=i;2==e.state&&(e.state=3,f.contentWindow.location=i),j||(j=setTimeout(function(){a(),c()},12e4))}var e=this,f=e.frame,g=e.form,h=e.options,i=h.localProxy;void 0!==f.onreadystatechange?f.onreadystatechange=d:f.onload=d;var j,k=!1},send:function(){function a(a,b){var c=document.createElement("input");return c.name=a,c.value=b,c}var b,c,d=this.params,e=this.files,f=this.form,g=Object.prototype.toString;for(b in d)if(d.hasOwnProperty(b))if(c=d[b],"[object Array]"===g.call(c)){if(!this.extra||this.extra&&this.extra.traditional===!1)var h=b+"[]";else var h=b;for(var i=0,j=c.length;j>i;i++)f.appendChild(a(h,c[i]))}else f.appendChild(a(b,c));var k,l,m,n=this._files=[],o=e.length;if(o>0){f.encoding=f.enctype="multipart/form-data";for(var p=0;o>p;p++)k=e[p],l=k.parentNode,m=k.cloneNode(),m.disabled="disabled",n.push([k,m,l]),l.insertBefore(m,k),f.appendChild(k)}k=l=m=null,f.submit(),this.state=2},isObject:function(a){return a&&"[object Object]"==Object.prototype.toString.call(a)&&!a.nodeType},isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},extend:function(a,b){var c,d=this.clone(b);for(c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);return a},clone:function(a){var b,c=this;if(c.isArray(a)){b=[];for(var d=0,e=a.length;e>d;d++)b.push(c.clone(a[d]))}else if(c.isObject(a)){b={};for(var f in a)a.hasOwnProperty(f)&&(b[f]=c.clone(a[f]))}else b=a;return b}},function(a){function b(a,b){return"dataset"in a?a.dataset[b]:a.getAttribute("data-"+b)}function c(a){var b=this.el=document.createElement("div"),c=this,d={"click#popClose":function(a,b){c.close()}};this.zIndex=++popMaxzIndex,this.config=a||{},this.config.dragable&&this.bindDragEvent(d),this.events=this.config.events&&h(d,a.events)||d,b.className="popbox-container_",b.style.cssText+=";display: none;top: 50%;left: 50%;z-index: "+this.zIndex,m?b.style.cssText+=";position: absolute":b.style.cssText+=";position: fixed",this.config.style&&(b.style.cssText+=i(a.style)),b.innerHTML=this.config.el&&a.el.call(this,this.el)||"",document.body.insertBefore(b,document.body.firstChild),o.push({instance:this,el:this.el,zIndex:this.zIndex}),this.config.overlay!==!1&&this.buildOverlay(),this.config.shortcut=a.shortcut||!1,this.bind()}var d={},e="function"!=typeof addEventListener,f={mouseenter:{type:"mouseover",target:"fromElement"},mouseleave:{type:"mouseout",target:"toElement"},focus:e?"focusin":"focus",blur:e?"focusout":"blur"},g=function(){var a=function(a,b){return a.compareDocumentPosition?0!==(16&a.compareDocumentPosition(b)):a.contains(b)},b=function(b,c,e,g){var h,i,j=e,k=!1;return("mouseenter"===c||"mouseleave"===c)&&(i=c,c=f[i].type,e=function(c){var c=window.event||c;h=c.relatedTarget||c[f[i].target],a(b,h)||b===h?c.stopPropagation?c.stopPropagation():c.cancelBubble=!0:j.call(b,c)},d[i]=d[i]||[],d[i].push({_callback:j,callback:e})),("blur"===c||"focus"===c)&&(k=!0,c=f[c]),g.call(b,c,e,k)};return"function"==typeof addEventListener?function(a,c,d){b(a,c,d,function(b,c,d){return a.addEventListener(b,c,d)})}:function(a,c,d){b(a,c,d,function(b,c){return a.attachEvent("on"+b,c)})}}(),h=(function(){var a=function(a,b,c,e){var g,h,i=!1;if("mouseenter"===b||"mouseleave"===b){g=d[b],h=b,b=f[h].type;for(var j=0;j<g.length;j++)if(c===g[j]._callback){c=g[j].callback;break}}return("blur"===b||"focus"===b)&&(i=!0,b=f[b]),e.call(a,b,c,i)};return"function"==typeof removeEventListener?function(b,c,d){a(b,c,d,function(a,c,d){return b.removeEventListener(a,c,d)})}:function(b,c,d){a(b,c,d,function(a,c){return b.attachEvent("on"+a,c)})}}(),function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}),i=function(a){var b=[";"];for(var c in a)a.hasOwnProperty(c)&&b.push(c+":"+a[c]);return b.join(";")},j=function(){return{docWidth:document.documentElement.scrollWidth||document.body.scrollWidth,docHeight:document.documentElement.scrollHeight||document.body.scrollHeight}},k=function(){return{width:document.documentElement.scrollLeft+document.documentElement.clientWidth/2,height:document.documentElement.scrollTop+document.documentElement.clientHeight/2}},m="undefined"==typeof a.XMLHttpRequest,n=popMaxzIndex=9998,o=[],p=[],q=!1,r=!1;c.prototype={reDraw:function(a,b){return b&&(this.el.style.cssText+=i(b)),this.el.innerHTML=a.call(this,this.el),this.layoutFix(),this},bind:function(){var a=this.events,c=this,d=o,e=function(a){return b(a,"event")&&b(a,"event").split(",")||[]},f=function(a,b){if("function"==typeof[].indexOf)return-1!==a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1},h=function(){var a=function(a,b,c){for(l=a.length;b<l;b++)a[b].el.style.zIndex=c++};return function(){for(var b=0,e=d.length;e>b;b++)if(d[b].zIndex===c.zIndex){var f=d.splice(b,1)[0],g=f.el.style.zIndex;d.push(f),a(d,b,g);break}}}(),i=function(a){a=window.event||a;var b=a.keyCode||a.which;if(27===b)for(var e=0,f=d.length;f>e;e++)c.close.call(d[e].instance)};for(var j in a)a.hasOwnProperty(j)&&!function(b){var d=b.split("#"),h=function(g){g=window.event||g;var h=g.srcElement||g.target,i=e(h);f(i,d[1])&&a[b].call(c,g,h)};g(c.el,d[0],h)}(j);g(this.el,"mousedown",h),this.config.shortcut&&!q&&(q=!0,g(document,"keydown",i))},close:function(a){return this.toggleOverlay(!1),this.el.style.display="none",a&&a.call(this),this},show:function(a){return this.toggleOverlay(!0),this.el.style.display="block",this.layoutFix(),a&&a.call(this),this},remove:function(){document.body.removeChild(this.el),this.overlayEl&&document.body.removeChild(this.overlayEl)},buildOverlay:function(){var a=this;this.overlayEl=overlay=document.createElement("div"),p.push(overlay),overlay.style.cssText+=";position: absolute;display: none;width: "+j().docWidth+"px;height: "+j().docHeight+"px;top: 0;left: 0;background: #000;filter: alpha(opacity=50);opacity: .5;z-index: "+n,document.body.insertBefore(overlay,document.body.firstChild),this.config.needShortCut&&g(this.overlayEl,"click",function(){a.close()})},toggleOverlay:function(a){var b=function(a){a.style.cssText+=";width: "+j().docWidth+"px;height: "+j().docHeight+"px"};this.overlayEl&&(a===!0?(this.overlayEl.style.cssText+=";display: block",b(this.overlayEl)):this.overlayEl.style.cssText+=";display: none"),r||(r=!0,g(window,"resize",function(){for(var a=0;a<p.length;a++)b(p[a])}))},bindDragEvent:function(a){var b=function(a,b){var c=this.el.style,d=this.el.offsetTop,e=this.el.offsetLeft,f={x:a.pageX||a.clientX,y:a.pageY||a.clientY},g={};c.marginLeft=c.marginTop="",c.cssText+=";top: "+d+"px;left: "+e+"px;",document.onmousemove=function(a){a=window.event||a,g={x:a.pageX||a.clientX,y:a.pageY||a.clientY},c.cssText+=";top: "+(d+g.y-f.y)+"px;left: "+(e+g.x-f.x)+"px;"},document.onmouseup=function(){document.onmouseup=document.onmousemove=document.onselect=null}};a["mousedown#popDrag"]=b},layoutFix:function(){var a=-this.el.offsetWidth/2+"px";offY=-this.el.offsetHeight/2+"px",m?this.el.style.cssText+=";top: "+k().height+"px;left: "+k().width+"px;":this.el.style.cssText+=";top: 50%;left: 50%;",this.el.style.cssText+=";margin-top: "+offY+";margin-left: "+a}},a.Popbox=c}(window);var SWFUpload,swfobject;void 0==SWFUpload&&(SWFUpload=function(a){this.initSWFUpload(a)}),SWFUpload.prototype.initSWFUpload=function(a){try{this.customSettings={},this.settings={},this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(a),this.loadSupport(),this.swfuploadPreload()&&this.loadFlash(),this.displayDebugInfo()}catch(b){throw delete SWFUpload.instances[this.movieName],b}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.5.0 2010-01-15 Beta 2",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290,RESIZE:-300},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.UPLOAD_TYPE={NORMAL:-1,RESIZED:-2},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120,JAVASCRIPT:-130,NONE:-130},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.RESIZE_ENCODING={JPEG:-1,PNG:-2},SWFUpload.completeURL=function(a){try{var b="",c=-1;return"string"!=typeof a||a.match(/^https?:\/\//i)||a.match(/^\//)||""===a?a:(c=window.location.pathname.lastIndexOf("/"),b=0>=c?"/":window.location.pathname.substr(0,c)+"/",b+a)}catch(d){return a}},SWFUpload.onload=function(){},SWFUpload.prototype.initSettings=function(a){this.ensureDefault=function(b,c){var d=a[b];void 0!=d?this.settings[b]=d:this.settings[b]=c},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("flash9_url","swfupload_fp9.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_preload_handler",null),this.ensureDefault("swfupload_load_failed_handler",null),this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_resize_start_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("mouse_click_handler",null),this.ensureDefault("mouse_out_handler",null),this.ensureDefault("mouse_over_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime(),this.settings.flash9_url=this.settings.flash9_url+(this.settings.flash9_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadSupport=function(){this.support={loading:swfobject.hasFlashPlayerVersion("9.0.28"),imageResize:swfobject.hasFlashPlayerVersion("10.0.0")}},SWFUpload.prototype.loadFlash=function(){var a,b,c,d,e;if(!this.support.loading)return void this.queueEvent("swfupload_load_failed_handler",["Flash Player doesn't support SWFUpload"]);if(null!==document.getElementById(this.movieName))return this.support.loading=!1,void this.queueEvent("swfupload_load_failed_handler",["Element ID already in use"]);if(a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==a)return this.support.loading=!1,void this.queueEvent("swfupload_load_failed_handler",["button place holder not found"]);c="block"!==(a.currentStyle&&a.currentStyle.display||window.getComputedStyle&&document.defaultView.getComputedStyle(a,null).getPropertyValue("display"))?"span":"div",b=document.createElement(c),d=this.getFlashHTML();try{b.innerHTML=d}catch(f){return this.support.loading=!1,void this.queueEvent("swfupload_load_failed_handler",["Exception loading Flash HTML into placeholder"])}return e=b.getElementsByTagName("object"),!e||e.length>1||0===e.length?(this.support.loading=!1,void this.queueEvent("swfupload_load_failed_handler",["Unable to find movie after adding to DOM"])):(1===e.length&&(this.movieElement=e[0]),a.parentNode.replaceChild(b.firstChild,a),void(void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement())))},SWFUpload.prototype.getFlashHTML=function(a){var b=['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.support.imageResize?this.settings.flash_url:this.settings.flash9_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">'].join(""),c=['<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.support.imageResize?this.settings.flash_url:this.settings.flash9_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="',this.getFlashVars(),'" />'].join("");return navigator.userAgent.search(/MSIE/)>-1&&(b=['<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="',this.movieName,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">'].join(""),c+='<param name="src" value="'+(this.support.imageResize?this.settings.flash_url:this.settings.flash9_url)+'" />'),[b,c,"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var a,b;return b=this.buildParamString(),a=this.settings.http_success.join(","),["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("");

},SWFUpload.prototype.getMovieElement=function(){if(void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var a,b,c=[];if(b=this.settings.post_params,"object"==typeof b)for(a in b)b.hasOwnProperty(a)&&c.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(b[a].toString()));return c.join("&amp;")},SWFUpload.prototype.destroy=function(){var a;try{if(this.cancelUpload(null,!1),a=this.cleanUp())try{a.parentNode.removeChild(a)}catch(b){}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(c){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","flash9_url:                ",this.settings.flash9_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_cursor:            ",this.settings.button_cursor.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_preload_handler assigned:  ",("function"==typeof this.settings.swfupload_preload_handler).toString(),"\n","	","swfupload_load_failed_handler assigned:  ",("function"==typeof this.settings.swfupload_load_failed_handler).toString(),"\n","	","swfupload_loaded_handler assigned:  ",("function"==typeof this.settings.swfupload_loaded_handler).toString(),"\n","	","mouse_click_handler assigned:       ",("function"==typeof this.settings.mouse_click_handler).toString(),"\n","	","mouse_over_handler assigned:        ",("function"==typeof this.settings.mouse_over_handler).toString(),"\n","	","mouse_out_handler assigned:         ",("function"==typeof this.settings.mouse_out_handler).toString(),"\n","	","file_dialog_start_handler assigned: ",("function"==typeof this.settings.file_dialog_start_handler).toString(),"\n","	","file_queued_handler assigned:       ",("function"==typeof this.settings.file_queued_handler).toString(),"\n","	","file_queue_error_handler assigned:  ",("function"==typeof this.settings.file_queue_error_handler).toString(),"\n","	","upload_resize_start_handler assigned:      ",("function"==typeof this.settings.upload_resize_start_handler).toString(),"\n","	","upload_start_handler assigned:      ",("function"==typeof this.settings.upload_start_handler).toString(),"\n","	","upload_progress_handler assigned:   ",("function"==typeof this.settings.upload_progress_handler).toString(),"\n","	","upload_error_handler assigned:      ",("function"==typeof this.settings.upload_error_handler).toString(),"\n","	","upload_success_handler assigned:    ",("function"==typeof this.settings.upload_success_handler).toString(),"\n","	","upload_complete_handler assigned:   ",("function"==typeof this.settings.upload_complete_handler).toString(),"\n","	","debug_handler assigned:             ",("function"==typeof this.settings.debug_handler).toString(),"\n","Support:\n","	","Load:                     ",this.support.loading?"Yes":"No","\n","	","Image Resize:             ",this.support.imageResize?"Yes":"No","\n"].join(""))},SWFUpload.prototype.addSetting=function(a,b,c){return void 0==b?this.settings[a]=c:this.settings[a]=b},SWFUpload.prototype.getSetting=function(a){return void 0!=this.settings[a]?this.settings[a]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){var movieElement,returnValue,returnString;argumentArray=argumentArray||[],movieElement=this.getMovieElement();try{void 0!=movieElement?(returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)):this.debug("Can't call flash because the movie wasn't found.")}catch(ex){this.debug("Exception calling flash function '"+functionName+"': "+ex.message)}return void 0!=returnValue&&"object"==typeof returnValue.post&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])},SWFUpload.prototype.startResizedUpload=function(a,b,c,d,e,f,g){this.callFlash("StartUpload",[a,{width:b,height:c,encoding:d,quality:e,allowEnlarging:f,resizedImageCondition:g}])},SWFUpload.prototype.cancelUpload=function(a,b){b!==!1&&(b=!0),this.callFlash("CancelUpload",[a,b])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.requeueUpload=function(a){return this.callFlash("RequeueUpload",[a])},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])},SWFUpload.prototype.getFile=function(a){return"number"==typeof a?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",[a])},SWFUpload.prototype.getQueueFile=function(a){return"number"==typeof a?this.callFlash("GetFileByQueueIndex",[a]):this.callFlash("GetFile",[a])},SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])},SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])},SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString(),this.callFlash("SetUploadURL",[a])},SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a,this.callFlash("SetPostParams",[a])},SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a,this.settings.file_types_description=b,this.callFlash("SetFileTypes",[a,b])},SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a,this.callFlash("SetFileSizeLimit",[a])},SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a,this.callFlash("SetFileUploadLimit",[a])},SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a,this.callFlash("SetFileQueueLimit",[a])},SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a,this.callFlash("SetFilePostName",[a])},SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a,this.callFlash("SetUseQueryString",[a])},SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a,this.callFlash("SetRequeueOnError",[a])},SWFUpload.prototype.setHTTPSuccess=function(a){"string"==typeof a&&(a=a.replace(" ","").split(",")),this.settings.http_success=a,this.callFlash("SetHTTPSuccess",[a])},SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a,this.callFlash("SetAssumeSuccessTimeout",[a])},SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a,this.callFlash("SetDebugEnabled",[a])},SWFUpload.prototype.setButtonImageURL=function(a){void 0==a&&(a=""),this.settings.button_image_url=a,this.callFlash("SetButtonImageURL",[a])},SWFUpload.prototype.setButtonDimensions=function(a,b){this.settings.button_width=a,this.settings.button_height=b;var c=this.getMovieElement();void 0!=c&&(c.style.width=a+"px",c.style.height=b+"px"),this.callFlash("SetButtonDimensions",[a,b])},SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a,this.callFlash("SetButtonText",[a])},SWFUpload.prototype.setButtonTextPadding=function(a,b){this.settings.button_text_top_padding=b,this.settings.button_text_left_padding=a,this.callFlash("SetButtonTextPadding",[a,b])},SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a,this.callFlash("SetButtonTextStyle",[a])},SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a,this.callFlash("SetButtonDisabled",[a])},SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a,this.callFlash("SetButtonAction",[a])},SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a,this.callFlash("SetButtonCursor",[a])},SWFUpload.prototype.queueEvent=function(a,b){var c=this;if(void 0==b?b=[]:b instanceof Array||(b=[b]),"function"==typeof this.settings[a])this.eventQueue.push(function(){this.settings[a].apply(this,b)}),setTimeout(function(){c.executeNextEvent()},0);else if(null!==this.settings[a])throw"Event handler "+a+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;"function"==typeof a&&a.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(a){var b,c,d,e=/[$]([0-9a-f]{4})/i,f={};if(void 0!=a){for(c in a.post)if(a.post.hasOwnProperty(c)){for(b=c;null!==(d=e.exec(b));)b=b.replace(d[0],String.fromCharCode(parseInt("0x"+d[1],16)));f[b]=a.post[c]}a.post=f}return a},SWFUpload.prototype.swfuploadPreload=function(){var a;if("function"==typeof this.settings.swfupload_preload_handler)a=this.settings.swfupload_preload_handler.call(this);else if(void 0!=this.settings.swfupload_preload_handler)throw"upload_start_handler must be a function";return void 0===a&&(a=!0),!!a},SWFUpload.prototype.flashReady=function(){var a=this.cleanUp();return a?void this.queueEvent("swfupload_loaded_handler"):void this.debug("Flash called back ready but the flash movie can't be found.")},SWFUpload.prototype.cleanUp=function(){var a,b=this.getMovieElement();try{if(b&&"unknown"==typeof b.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(a in b)try{"function"==typeof b[a]&&(b[a]=null)}catch(c){}}}catch(d){}return window.__flash__removeCallback=function(a,b){try{a&&(a[b]=null)}catch(c){}},b},SWFUpload.prototype.mouseClick=function(){this.queueEvent("mouse_click_handler")},SWFUpload.prototype.mouseOver=function(){this.queueEvent("mouse_over_handler")},SWFUpload.prototype.mouseOut=function(){this.queueEvent("mouse_out_handler")},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("file_queued_handler",a)},SWFUpload.prototype.fileQueueError=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("file_queue_error_handler",[a,b,c])},SWFUpload.prototype.fileDialogComplete=function(a,b,c){this.queueEvent("file_dialog_complete_handler",[a,b,c])},SWFUpload.prototype.uploadResizeStart=function(a,b){a=this.unescapeFilePostParams(a),this.queueEvent("upload_resize_start_handler",[a,b.width,b.height,b.encoding,b.quality])},SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("return_upload_start_handler",a)},SWFUpload.prototype.returnUploadStart=function(a){var b;if("function"==typeof this.settings.upload_start_handler)a=this.unescapeFilePostParams(a),b=this.settings.upload_start_handler.call(this,a);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===b&&(b=!0),b=!!b,this.callFlash("ReturnUploadStart",[b])},SWFUpload.prototype.uploadProgress=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_progress_handler",[a,b,c])},SWFUpload.prototype.uploadError=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_error_handler",[a,b,c])},SWFUpload.prototype.uploadSuccess=function(a,b,c){a=this.unescapeFilePostParams(a),this.queueEvent("upload_success_handler",[a,b,c])},SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a),this.queueEvent("upload_complete_handler",a)},SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)},SWFUpload.prototype.debugMessage=function(a){var b,c,d;if(this.settings.debug)if(c=[],"object"==typeof a&&"string"==typeof a.name&&"string"==typeof a.message){for(d in a)a.hasOwnProperty(d)&&c.push(d+": "+a[d]);b=c.join("\n")||"",c=b.split("\n"),b="EXCEPTION: "+c.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(b)}else SWFUpload.Console.writeLine(a)},SWFUpload.Console={},SWFUpload.Console.writeLine=function(a){var b,c;try{b=document.getElementById("SWFUpload_Console"),b||(c=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(c),b=document.createElement("textarea"),b.id="SWFUpload_Console",b.style.fontFamily="monospace",b.setAttribute("wrap","off"),b.wrap="off",b.style.overflow="auto",b.style.width="700px",b.style.height="350px",b.style.margin="5px",c.appendChild(b)),b.value+=a+"\n",b.scrollTop=b.scrollHeight-b.clientHeight}catch(d){alert("Exception: "+d.name+" Message: "+d.message)}},swfobject=function(){function a(){if(!R){try{var a=K.getElementsByTagName("body")[0].appendChild(q("span"));a.parentNode.removeChild(a)}catch(b){return}R=!0;for(var c=N.length,d=0;c>d;d++)N[d]()}}function b(a){R?a():N[N.length]=a}function c(a){if(typeof J.addEventListener!=C)J.addEventListener("load",a,!1);else if(typeof K.addEventListener!=C)K.addEventListener("load",a,!1);else if(typeof J.attachEvent!=C)r(J,"onload",a);else if("function"==typeof J.onload){var b=J.onload;J.onload=function(){b(),a()}}else J.onload=a}function d(){M?e():f()}function e(){var a=K.getElementsByTagName("body")[0],b=q(D);b.setAttribute("type",G);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=C){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),U.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,f()}()}else f()}function f(){var a=O.length;if(a>0)for(var b=0;a>b;b++){var c=O[b].id,d=O[b].callbackFn,e={success:!1,id:c};if(U.pv[0]>0){var f=p(c);if(f)if(!s(O[b].swfVersion)||U.wk&&U.wk<312)if(O[b].expressInstall&&h()){var k={};k.data=O[b].expressInstall,k.width=f.getAttribute("width")||"0",k.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(k.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(k.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));i(k,l,c,d)}else j(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e))}else if(u(c,!0),d){var q=g(c);q&&typeof q.SetVariable!=C&&(e.success=!0,e.ref=q),d(e)}}}function g(a){var b=null,c=p(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=C)b=c;else{var d=c.getElementsByTagName(D)[0];d&&(b=d)}return b}function h(){return!S&&s("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function i(a,b,c,d){S=!0,y=d||null,z={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(w=k(e),x=null):(w=e,x=c),a.id=H,(typeof a.width==C||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==C||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),K.title=K.title.slice(0,47)+" - Flash Player Installation";var f=U.ie&&U.win?"ActiveX":"PlugIn",g="MMredirectURL="+J.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+K.title;if(typeof b.flashvars!=C?b.flashvars+="&"+g:b.flashvars=g,U.ie&&U.win&&4!=e.readyState){var h=q("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}l(a,b,c)}}function j(a){if(U.ie&&U.win&&4!=a.readyState){var b=q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(k(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=q("div");if(U.win&&U.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(D)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function l(a,b,c){var d,e=p(c);if(U.wk&&U.wk<312)return d;if(e)if(typeof a.id==C&&(a.id=c),U.ie&&U.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",P[P.length]=a.id,d=p(a.id)}else{var j=q(D);j.setAttribute("type",G);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&m(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function m(a,b,c){var d=q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(U.ie&&U.win?(b.style.display="none",function(){4==b.readyState?o(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a){var b=p(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=null;try{b=K.getElementById(a)}catch(c){}return b}function q(a){return K.createElement(a)}function r(a,b,c){a.attachEvent(b,c),Q[Q.length]=[a,b,c]}function s(a){var b=U.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c,d){if(!U.ie||!U.mac){var e=K.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(A=null,B=null),!A||B!=f){var g=q("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),A=e.appendChild(g),U.ie&&U.win&&typeof K.styleSheets!=C&&K.styleSheets.length>0&&(A=K.styleSheets[K.styleSheets.length-1]),B=f}U.ie&&U.win?A&&typeof A.addRule==D&&A.addRule(a,b):A&&typeof K.createTextNode!=C&&A.appendChild(K.createTextNode(a+" {"+b+"}"))}}}function u(a,b){if(T){var c=b?"visible":"hidden";R&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function v(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=C?encodeURIComponent(a):a}{var w,x,y,z,A,B,C="undefined",D="object",E="Shockwave Flash",F="ShockwaveFlash.ShockwaveFlash",G="application/x-shockwave-flash",H="SWFObjectExprInst",I="onreadystatechange",J=window,K=document,L=navigator,M=!1,N=[d],O=[],P=[],Q=[],R=!1,S=!1,T=!0,U=function(){var a=typeof K.getElementById!=C&&typeof K.getElementsByTagName!=C&&typeof K.createElement!=C,b=L.userAgent.toLowerCase(),c=L.platform.toLowerCase(),d=/win/.test(c?c:b),e=/mac/.test(c?c:b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof L.plugins!=C&&typeof L.plugins[E]==D)i=L.plugins[E].description,!i||typeof L.mimeTypes!=C&&L.mimeTypes[G]&&!L.mimeTypes[G].enabledPlugin||(M=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof J.ActiveXObject!=C)try{var j=new ActiveXObject(F);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();!function(){U.w3&&((typeof K.readyState!=C&&"complete"==K.readyState||typeof K.readyState==C&&(K.getElementsByTagName("body")[0]||K.body))&&a(),R||(typeof K.addEventListener!=C&&K.addEventListener("DOMContentLoaded",a,!1),U.ie&&U.win&&(K.attachEvent(I,function(){"complete"==K.readyState&&(K.detachEvent(I,arguments.callee),a())}),J==top&&!function(){if(!R){try{K.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),U.wk&&!function(){return R?void 0:/loaded|complete/.test(K.readyState)?void a():void setTimeout(arguments.callee,0)}(),c(a)))}(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var a=Q.length,b=0;a>b;b++)Q[b][0].detachEvent(Q[b][1],Q[b][2]);for(var c=P.length,d=0;c>d;d++)n(P[d]);for(var e in U)U[e]=null;U=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}()}return{registerObject:function(a,b,c,d){if(U.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,O[O.length]=e,u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return U.w3?g(a):void 0},embedSWF:function(a,c,d,e,f,g,j,k,m,n){var o={success:!1,id:c};U.w3&&!(U.wk&&U.wk<312)&&a&&c&&d&&e&&f?(u(c,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===D)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var q={};if(k&&typeof k===D)for(var r in k)q[r]=k[r];if(j&&typeof j===D)for(var t in j)typeof q.flashvars!=C?q.flashvars+="&"+t+"="+j[t]:q.flashvars=t+"="+j[t];if(s(f)){var v=l(b,q,c);b.id==c&&u(c,!0),o.success=!0,o.ref=v}else{if(g&&h())return b.data=g,void i(b,q,c,n);u(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){T=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){return U.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){U.w3&&h()&&i(a,b,c,d)},removeSWF:function(a){U.w3&&n(a)},createCSS:function(a,b,c,d){U.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=K.location.search||K.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return v(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return v(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var a=p(H);a&&w&&(a.parentNode.replaceChild(w,a),x&&(u(x,!0),U.ie&&U.win&&(w.style.display="block")),y&&y(z)),S=!1}}}}(),swfobject.addDomLoadEvent(function(){"function"==typeof SWFUpload.onload&&SWFUpload.onload.call(window)}),!function(a){"use strict";function b(a){return a.replace(/,/g,".").replace(/[^0-9\.]/g,"")}function c(a){return parseFloat(b(a))>=10}var d,e={bridge:null,version:"0.0.0",disabled:null,outdated:null,ready:null},f={},g=0,h={},i=0,j={},k=null,l=null,m=function(){var a,b,c,d,e="ZeroClipboard.swf";if(document.currentScript&&(d=document.currentScript.src));else{var f=document.getElementsByTagName("script");if("readyState"in f[0])for(a=f.length;a--&&("interactive"!==f[a].readyState||!(d=f[a].src)););else if("loading"===document.readyState)d=f[f.length-1].src;else{for(a=f.length;a--;){if(c=f[a].src,!c){b=null;break}if(c=c.split("#")[0].split("?")[0],c=c.slice(0,c.lastIndexOf("/")+1),null==b)b=c;else if(b!==c){b=null;break}}null!==b&&(d=b)}}return d&&(d=d.split("#")[0].split("?")[0],e=d.slice(0,d.lastIndexOf("/")+1)+e),e}(),n=function(){var a=/\-([a-z])/g,b=function(a,b){return b.toUpperCase()};return function(c){return c.replace(a,b)}}(),o=function(b,c){var d,e,f;return a.getComputedStyle?d=a.getComputedStyle(b,null).getPropertyValue(c):(e=n(c),d=b.currentStyle?b.currentStyle[e]:b.style[e]),"cursor"!==c||d&&"auto"!==d||(f=b.tagName.toLowerCase(),"a"!==f)?d:"pointer"},p=function(b){b||(b=a.event);var c;this!==a?c=this:b.target?c=b.target:b.srcElement&&(c=b.srcElement),K.activate(c)},q=function(a,b,c){a&&1===a.nodeType&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))},r=function(a,b,c){a&&1===a.nodeType&&(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c))},s=function(a,b){if(!a||1!==a.nodeType)return a;if(a.classList)return a.classList.contains(b)||a.classList.add(b),a;if(b&&"string"==typeof b){var c=(b||"").split(/\s+/);if(1===a.nodeType)if(a.className){for(var d=" "+a.className+" ",e=a.className,f=0,g=c.length;g>f;f++)d.indexOf(" "+c[f]+" ")<0&&(e+=" "+c[f]);a.className=e.replace(/^\s+|\s+$/g,"")}else a.className=b}return a},t=function(a,b){if(!a||1!==a.nodeType)return a;if(a.classList)return a.classList.contains(b)&&a.classList.remove(b),a;if(b&&"string"==typeof b||void 0===b){var c=(b||"").split(/\s+/);if(1===a.nodeType&&a.className)if(b){for(var d=(" "+a.className+" ").replace(/[\n\t]/g," "),e=0,f=c.length;f>e;e++)d=d.replace(" "+c[e]+" "," ");a.className=d.replace(/^\s+|\s+$/g,"")}else a.className=""}return a},u=function(){var a,b,c,d=1;return"function"==typeof document.body.getBoundingClientRect&&(a=document.body.getBoundingClientRect(),b=a.right-a.left,c=document.body.offsetWidth,d=Math.round(b/c*100)/100),d},v=function(b,c){var d={left:0,top:0,width:0,height:0,zIndex:B(c)-1};if(b.getBoundingClientRect){var e,f,g,h=b.getBoundingClientRect();"pageXOffset"in a&&"pageYOffset"in a?(e=a.pageXOffset,f=a.pageYOffset):(g=u(),e=Math.round(document.documentElement.scrollLeft/g),f=Math.round(document.documentElement.scrollTop/g));var i=document.documentElement.clientLeft||0,j=document.documentElement.clientTop||0;d.left=h.left+e-i,d.top=h.top+f-j,d.width="width"in h?h.width:h.right-h.left,d.height="height"in h?h.height:h.bottom-h.top}return d},w=function(a,b){var c=null==b||b&&b.cacheBust===!0&&b.useNoCache===!0;return c?(-1===a.indexOf("?")?"?":"&")+"noCache="+(new Date).getTime():""},x=function(b){var c,d,e,f=[],g=[],h=[];if(b.trustedOrigins&&("string"==typeof b.trustedOrigins?g.push(b.trustedOrigins):"object"==typeof b.trustedOrigins&&"length"in b.trustedOrigins&&(g=g.concat(b.trustedOrigins))),b.trustedDomains&&("string"==typeof b.trustedDomains?g.push(b.trustedDomains):"object"==typeof b.trustedDomains&&"length"in b.trustedDomains&&(g=g.concat(b.trustedDomains))),g.length)for(c=0,d=g.length;d>c;c++)if(g.hasOwnProperty(c)&&g[c]&&"string"==typeof g[c]){if(e=E(g[c]),!e)continue;if("*"===e){h=[e];break}h.push.apply(h,[e,"//"+e,a.location.protocol+"//"+e])}return h.length&&f.push("trustedOrigins="+encodeURIComponent(h.join(","))),"string"==typeof b.jsModuleId&&b.jsModuleId&&f.push("jsModuleId="+encodeURIComponent(b.jsModuleId)),f.join("&")},y=function(a,b,c){if("function"==typeof b.indexOf)return b.indexOf(a,c);var d,e=b.length;for("undefined"==typeof c?c=0:0>c&&(c=e+c),d=c;e>d;d++)if(b.hasOwnProperty(d)&&b[d]===a)return d;return-1},z=function(a){if("string"==typeof a)throw new TypeError("ZeroClipboard doesn't accept query strings.");return a.length?a:[a]},A=function(b,c,d,e){e?a.setTimeout(function(){b.apply(c,d)},0):b.apply(c,d)},B=function(a){var b,c;return a&&("number"==typeof a&&a>0?b=a:"string"==typeof a&&(c=parseInt(a,10))&&!isNaN(c)&&c>0&&(b=c)),b||("number"==typeof N.zIndex&&N.zIndex>0?b=N.zIndex:"string"==typeof N.zIndex&&(c=parseInt(N.zIndex,10))&&!isNaN(c)&&c>0&&(b=c)),b||0},C=function(a,b){if(a&&b!==!1&&"undefined"!=typeof console&&console&&(console.warn||console.log)){var c="`"+a+"` is deprecated. See docs for more info:\n    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";console.warn?console.warn(c):console.log(c)}},D=function(){var a,b,c,d,e,f,g=arguments[0]||{};for(a=1,b=arguments.length;b>a;a++)if(null!=(c=arguments[a]))for(d in c)if(c.hasOwnProperty(d)){if(e=g[d],f=c[d],g===f)continue;void 0!==f&&(g[d]=f)}return g},E=function(a){if(null==a||""===a)return null;if(a=a.replace(/^\s+|\s+$/g,""),""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return a=-1===c?a:-1===b||0===c?null:a.slice(0,c),a&&".swf"===a.slice(-4).toLowerCase()?null:a||null},F=function(){var a=function(a,b){var c,d,e;if(null!=a&&"*"!==b[0]&&("string"==typeof a&&(a=[a]),"object"==typeof a&&"length"in a))for(c=0,d=a.length;d>c;c++)if(a.hasOwnProperty(c)&&(e=E(a[c]))){if("*"===e){b.length=0,b.push("*");break}-1===y(e,b)&&b.push(e)}},b={always:"always",samedomain:"sameDomain",never:"never"};return function(c,d){var e,f=d.allowScriptAccess;if("string"==typeof f&&(e=f.toLowerCase())&&/^always|samedomain|never$/.test(e))return b[e];var g=E(d.moviePath);null===g&&(g=c);var h=[];a(d.trustedOrigins,h),a(d.trustedDomains,h);var i=h.length;if(i>0){if(1===i&&"*"===h[0])return"always";if(-1!==y(c,h))return 1===i&&c===g?"sameDomain":"always"}return"never"}}(),G=function(a){if(null==a)return[];if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},H=function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&delete a[b];return a},I=function(){try{return document.activeElement}catch(a){}return null},J=function(){var a=!1;if("boolean"==typeof e.disabled)a=e.disabled===!1;else{if("function"==typeof ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){}!a&&navigator.mimeTypes["application/x-shockwave-flash"]&&(a=!0)}return a},K=function(a,b){return this instanceof K?(this.id=""+g++,h[this.id]={instance:this,elements:[],handlers:{}},a&&this.clip(a),"undefined"!=typeof b&&(C("new ZeroClipboard(elements, options)",N.debug),K.config(b)),this.options=K.config(),"boolean"!=typeof e.disabled&&(e.disabled=!J()),void(e.disabled===!1&&e.outdated!==!0&&null===e.bridge&&(e.outdated=!1,e.ready=!1,O()))):new K(a,b)};K.prototype.setText=function(a){return a&&""!==a&&(f["text/plain"]=a,e.ready===!0&&e.bridge&&"function"==typeof e.bridge.setText?e.bridge.setText(a):e.ready=!1),this},K.prototype.setSize=function(a,b){return e.ready===!0&&e.bridge&&"function"==typeof e.bridge.setSize?e.bridge.setSize(a,b):e.ready=!1,this};var L=function(a){e.ready===!0&&e.bridge&&"function"==typeof e.bridge.setHandCursor?e.bridge.setHandCursor(a):e.ready=!1};K.prototype.destroy=function(){this.unclip(),this.off(),delete h[this.id]};var M=function(){var a,b,c,d=[],e=G(h);for(a=0,b=e.length;b>a;a++)c=h[e[a]].instance,c&&c instanceof K&&d.push(c);return d};K.version="1.3.5";var N={swfPath:m,trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceHandCursor:!1,
zIndex:999999999,debug:!0,title:null,autoActivate:!0};K.config=function(a){if("object"==typeof a&&null!==a&&D(N,a),"string"!=typeof a||!a){var b={};for(var c in N)N.hasOwnProperty(c)&&(b[c]="object"==typeof N[c]&&null!==N[c]?"length"in N[c]?N[c].slice(0):D({},N[c]):N[c]);return b}return N.hasOwnProperty(a)?N[a]:void 0},K.destroy=function(){K.deactivate();for(var a in h)if(h.hasOwnProperty(a)&&h[a]){var b=h[a].instance;b&&"function"==typeof b.destroy&&b.destroy()}var c=P(e.bridge);c&&c.parentNode&&(c.parentNode.removeChild(c),e.ready=null,e.bridge=null)},K.activate=function(a){d&&(t(d,N.hoverClass),t(d,N.activeClass)),d=a,s(a,N.hoverClass),Q();var b=N.title||a.getAttribute("title");if(b){var c=P(e.bridge);c&&c.setAttribute("title",b)}var f=N.forceHandCursor===!0||"pointer"===o(a,"cursor");L(f)},K.deactivate=function(){var a=P(e.bridge);a&&(a.style.left="0px",a.style.top="-9999px",a.removeAttribute("title")),d&&(t(d,N.hoverClass),t(d,N.activeClass),d=null)};var O=function(){var b,c,d=document.getElementById("global-zeroclipboard-html-bridge");if(!d){var f=K.config();f.jsModuleId="string"==typeof k&&k||"string"==typeof l&&l||null;var g=F(a.location.host,N),h=x(f),i=N.moviePath+w(N.moviePath,N),j='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+i+'"/>         <param name="allowScriptAccess" value="'+g+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+h+'"/>         <embed src="'+i+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="'+g+'"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+h+'"           scale="exactfit">         </embed>       </object>';d=document.createElement("div"),d.id="global-zeroclipboard-html-bridge",d.setAttribute("class","global-zeroclipboard-container"),d.style.position="absolute",d.style.left="0px",d.style.top="-9999px",d.style.width="15px",d.style.height="15px",d.style.zIndex=""+B(N.zIndex),document.body.appendChild(d),d.innerHTML=j}b=document["global-zeroclipboard-flash-bridge"],b&&(c=b.length)&&(b=b[c-1]),e.bridge=b||d.children[0].lastElementChild},P=function(a){for(var b=/^OBJECT|EMBED$/,c=a&&a.parentNode;c&&b.test(c.nodeName)&&c.parentNode;)c=c.parentNode;return c||null},Q=function(){if(d){var a=v(d,N.zIndex),b=P(e.bridge);b&&(b.style.top=a.top+"px",b.style.left=a.left+"px",b.style.width=a.width+"px",b.style.height=a.height+"px",b.style.zIndex=a.zIndex+1),e.ready===!0&&e.bridge&&"function"==typeof e.bridge.setSize?e.bridge.setSize(a.width,a.height):e.ready=!1}return this};K.prototype.on=function(a,b){var c,d,f,g={},i=h[this.id]&&h[this.id].handlers;if("string"==typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)a.hasOwnProperty(c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.on(c,a[c]);if(f&&f.length){for(c=0,d=f.length;d>c;c++)a=f[c].replace(/^on/,""),g[a]=!0,i[a]||(i[a]=[]),i[a].push(b);g.noflash&&e.disabled&&T.call(this,"noflash",{}),g.wrongflash&&e.outdated&&T.call(this,"wrongflash",{flashVersion:e.version}),g.load&&e.ready&&T.call(this,"load",{flashVersion:e.version})}return this},K.prototype.off=function(a,b){var c,d,e,f,g,i=h[this.id]&&h[this.id].handlers;if(0===arguments.length)f=G(i);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)a.hasOwnProperty(c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),g=i[a],g&&g.length)if(b)for(e=y(b,g);-1!==e;)g.splice(e,1),e=y(b,g,e);else i[a].length=0;return this},K.prototype.handlers=function(a){var b,c=null,d=h[this.id]&&h[this.id].handlers;if(d){if("string"==typeof a&&a)return d[a]?d[a].slice(0):null;c={};for(b in d)d.hasOwnProperty(b)&&d[b]&&(c[b]=d[b].slice(0))}return c};var R=function(b,c,d,e){var f=h[this.id]&&h[this.id].handlers[b];if(f&&f.length){var g,i,j,k=c||this;for(g=0,i=f.length;i>g;g++)j=f[g],c=k,"string"==typeof j&&"function"==typeof a[j]&&(j=a[j]),"object"==typeof j&&j&&"function"==typeof j.handleEvent&&(c=j,j=j.handleEvent),"function"==typeof j&&A(j,c,d,e)}return this};K.prototype.clip=function(a){a=z(a);for(var b=0;b<a.length;b++)if(a.hasOwnProperty(b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?-1===y(this.id,j[a[b].zcClippingId])&&j[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+i++,j[a[b].zcClippingId]=[this.id],N.autoActivate===!0&&q(a[b],"mouseover",p));var c=h[this.id].elements;-1===y(a[b],c)&&c.push(a[b])}return this},K.prototype.unclip=function(a){var b=h[this.id];if(b){var c,d=b.elements;a="undefined"==typeof a?d.slice(0):z(a);for(var e=a.length;e--;)if(a.hasOwnProperty(e)&&a[e]&&1===a[e].nodeType){for(c=0;-1!==(c=y(a[e],d,c));)d.splice(c,1);var f=j[a[e].zcClippingId];if(f){for(c=0;-1!==(c=y(this.id,f,c));)f.splice(c,1);0===f.length&&(N.autoActivate===!0&&r(a[e],"mouseover",p),delete a[e].zcClippingId)}}}return this},K.prototype.elements=function(){var a=h[this.id];return a&&a.elements?a.elements.slice(0):[]};var S=function(a){var b,c,d,e,f,g=[];if(a&&1===a.nodeType&&(b=a.zcClippingId)&&j.hasOwnProperty(b)&&(c=j[b],c&&c.length))for(d=0,e=c.length;e>d;d++)f=h[c[d]].instance,f&&f instanceof K&&g.push(f);return g};N.hoverClass="zeroclipboard-is-hover",N.activeClass="zeroclipboard-is-active",N.trustedOrigins=null,N.allowScriptAccess=null,N.useNoCache=!0,N.moviePath="ZeroClipboard.swf",K.detectFlashSupport=function(){return C("ZeroClipboard.detectFlashSupport",N.debug),J()},K.dispatch=function(a,b){if("string"==typeof a&&a){var c=a.toLowerCase().replace(/^on/,"");if(c)for(var e=d&&N.autoActivate===!0?S(d):M(),f=0,g=e.length;g>f;f++)T.call(e[f],c,b)}},K.prototype.setHandCursor=function(a){return C("ZeroClipboard.prototype.setHandCursor",N.debug),a="boolean"==typeof a?a:!!a,L(a),N.forceHandCursor=a,this},K.prototype.reposition=function(){return C("ZeroClipboard.prototype.reposition",N.debug),Q()},K.prototype.receiveEvent=function(a,b){if(C("ZeroClipboard.prototype.receiveEvent",N.debug),"string"==typeof a&&a){var c=a.toLowerCase().replace(/^on/,"");c&&T.call(this,c,b)}},K.prototype.setCurrent=function(a){return C("ZeroClipboard.prototype.setCurrent",N.debug),K.activate(a),this},K.prototype.resetBridge=function(){return C("ZeroClipboard.prototype.resetBridge",N.debug),K.deactivate(),this},K.prototype.setTitle=function(a){if(C("ZeroClipboard.prototype.setTitle",N.debug),a=a||N.title||d&&d.getAttribute("title")){var b=P(e.bridge);b&&b.setAttribute("title",a)}return this},K.setDefaults=function(a){C("ZeroClipboard.setDefaults",N.debug),K.config(a)},K.prototype.addEventListener=function(a,b){return C("ZeroClipboard.prototype.addEventListener",N.debug),this.on(a,b)},K.prototype.removeEventListener=function(a,b){return C("ZeroClipboard.prototype.removeEventListener",N.debug),this.off(a,b)},K.prototype.ready=function(){return C("ZeroClipboard.prototype.ready",N.debug),e.ready===!0};var T=function(a,g){a=a.toLowerCase().replace(/^on/,"");var h=g&&g.flashVersion&&b(g.flashVersion)||null,i=d,j=!0;switch(a){case"load":if(h){if(!c(h))return void T.call(this,"onWrongFlash",{flashVersion:h});e.outdated=!1,e.ready=!0,e.version=h}break;case"wrongflash":h&&!c(h)&&(e.outdated=!0,e.ready=!1,e.version=h);break;case"mouseover":s(i,N.hoverClass);break;case"mouseout":N.autoActivate===!0&&K.deactivate();break;case"mousedown":s(i,N.activeClass);break;case"mouseup":t(i,N.activeClass);break;case"datarequested":if(i){var k=i.getAttribute("data-clipboard-target"),l=k?document.getElementById(k):null;if(l){var m=l.value||l.textContent||l.innerText;m&&this.setText(m)}else{var n=i.getAttribute("data-clipboard-text");n&&this.setText(n)}}j=!1;break;case"complete":H(f),i&&i!==I()&&i.focus&&i.focus()}var o=i,p=[this,g];return R.call(this,a,o,p,j)};"function"==typeof define&&define.amd?define(["require","exports","module"],function(a,b,c){return k=c&&c.id||null,K}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports&&"function"==typeof a.require?(l=module.id||null,module.exports=K):a.ZeroClipboard=K}(function(){return this}());var commonJs={setloginlink:function(a){var b=pc.getElem(".login-QQ",a),c=pc.getElem(".login-weibo",a),d=pc.getElem(".login-taobao",a);b&&(b.href="http://my.pconline.com.cn/passport/opens/authorize.jsp?type=qzone_online&return="+location.href),c&&(c.href="http://my.pconline.com.cn/passport/opens/authorize.jsp?type=sina_online&return="+location.href),d&&(d.href="http://passport2.pconline.com.cn/passport2/api/open_oauth.jsp?type=taobao_online&display=&return="+location.href+"&bind_url=http://my.pconline.com.cn/passport/opens/open_bind.jsp?return="+location.href)},isloginstate:function(){return pc.getCookie(pageGlobal.sessionname)?pc.getCookie(pageGlobal.cmuname)?pc.getCookie(pageGlobal.cmuname):"":!1},gotoLoginPage:function(){window.location.href="http://my.pconline.com.cn/passport/login.jsp?return="+window.location.href},getfaceUrl:function(a){if("undefined"!=typeof a){"string"!=typeof a&&(a=a.toString());for(var b="http://i7.3conline.com/images/upload/upc/face/",c=0,d=a.length;d>c;c++){var e=d>=c+2?c+2:c+1;b+=a.substring(c,e)+"/",c++}return b+a+"_100x100"}},getNickname:function(a){var b="";return pc.ajax({url:pageGlobal.root+commonVar.userjsonSrc+"?id="+a,type:"GET",async:!1,dataType:"text",success:function(a){var c=toolJs.evalJson(a);0!=c.userId&&(b=c.nickname?c.nickname:c.name)}}),b},hoverClass:function(a,b,c){if("undefined"==typeof c)var c=!0;var a=pc(a),d=null;c?(a.addEvent("mouseover",function(){clearTimeout(d),d=setTimeout(function(){a.addClass(b)},200)}),a.addEvent("mouseout",function(){clearTimeout(d),d=setTimeout(function(){a.removeClass(b)},200)})):(a.addEvent("mouseover",function(){a.addClass(b)}),a.addEvent("mouseout",function(){a.removeClass(b)}))},triggleDisplay:function(a,b,c){if(c){var d=null;pc.addEvent(a,"mouseover",function(){clearTimeout(d),d=setTimeout(function(){pc(b).show()},200)}),pc.addEvent(a,"mouseout",function(){clearTimeout(d),d=setTimeout(function(){pc(b).hide()},400)})}else pc.addEvent(a,"mouseover",function(){pc(b).show()}),pc.addEvent(a,"mouseout",function(){pc(b).hide()})},toggleClass:function(a,b){pc.hasClass(a,b)?pc.removeClass(a,b):pc.addClass(a,b)},getElemByData:function(a,b,c){var d=pc.getElems("."+a),e=null;return d.length>0&&pc.each(d,function(a){return a.getAttribute(b)&&a.getAttribute(b)==c?(e=a,!1):void 0}),e},getElemsByData:function(a,b,c){var d=pc.getElems("."+a),e=[];return d.length>0&&pc.each(d,function(a){a.getAttribute(b)&&(c?a.getAttribute(b)==c&&e.push(a):e.push(a))}),e},pageRedirect:function(a){window.location.href=pageGlobal.root+"redirect.do?url="+encodeURI(a)},alertMessage:function(a,b,c){var d=b||"popClose";new Popbox({el:function(){return'<div class="alertbox"><div class="pop-header" data-event="popDrag"><span class="pop-header-title">系统提示</span><a href="javascript:;" class="pop-header-close" data-event="'+d+'"></a></div><div class="pop-info"><div class="tips-info">'+a+'</div></div><div class="pop-footer"><a href="javascript:;" class="pop-submit" data-event="'+d+'">确定</a></div></div>'},style:{width:"350px"},events:{"click#popClose":function(a,b){this.remove()},"click#refresh":function(a,b){location.reload()},"click#redirect":function(a,b){location.href=c}},dragable:!0}).show()},confirmMessage:function(a,b){new Popbox({el:function(){return'<div class="alertbox"><div class="pop-header" data-event="popDrag"><span class="pop-header-title">系统提示</span><a href="javascript:;" class="pop-header-close" data-event="popClose"></a></div><div class="pop-info"><div class="tips-info">'+a+'</div></div><div class="pop-footer"><a href="javascript:;" class="pop-submit" data-event="popClose,confirm">确定</a><a href="javascript:;" class="pop-cancel" data-event="popClose">取消</a></div></div>'},style:{width:"350px"},events:{"click#popClose":function(a,b){this.remove()},"click#confirm":b},dragable:!0}).show()},tipMessage:function(a,b,c){var d=new Popbox({el:function(){return'<div class="alertbox"><div class="pop-info"><div class="tips-info">'+a+"</div></div></div>"},style:{width:"350px"},overlay:!1}).show();setTimeout(function(){d.remove(),b&&(c?location.href=c:location.reload())},1e3)}},toolJs={getOffset:function(a){var b=a.getBoundingClientRect(),c=document.documentElement.scrollTop+document.body.scrollTop,d=document.documentElement.scrollLeft+document.body.scrollLeft;return{top:b.top+c,left:b.left+d}},inputSelector:function(a){var b=function(a){var b=[];try{b=[].slice.call(a)}catch(c){for(var d=0,e=a.length;e>d;d++)b.push(a[d])}return b},c=b(a.getElementsByTagName("input")),d=b(a.getElementsByTagName("textarea"));return c.concat(d)},serialize:function(a){var b=toolJs.inputSelector(a),c=[];if(b.length>0){for(var d=0;d<b.length;d++){var e=b[d].getAttribute("name")+"="+encodeURIComponent(b[d].value);c.push(e)}return c.join("&")}},isBlankObj:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},inArray:function(a,b){for(var c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},isDate:function(a){return a&&"object"==typeof a&&a.constructor==Date},getTextLength:function(a){return a?a.value.replace(/\r?\n/g,"_").length:void 0},getTextCount:function(a){var b=a.replace(/[^\x00-\xff]/gi,"xx");return Math.floor(b.length/2)},evalJson:function(a){return a&&"string"==typeof a?(a=a.replace(/\r?\n/g,""),new Function("return "+a)()):void 0},merge:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},extend:function(a,b,c){void 0===c&&(c=!0);for(var d in b)!b.hasOwnProperty(d)||!c&&a.hasOwnProperty(d)||(a[d]=b[d])},uniquearray:function(a){if(!a&&"Array"!=typeof a)return[];for(var b=[],c=a.length,d={},e=0;c>e;e++){var f=a[e];d[f]||(b.push(f),d[f]=!0)}return b},urlGenerator:function(a,b,c){var d="";if(d+=a&&-1==a.indexOf("?")?"?":"&",b&&"object"==typeof b)for(var e in b)d+=e+"="+b[e]+"&";return d=d.replace(/&$/,""),c&&(d=encodeURIComponent(d)),a+d},preventDefault:function(a){a&&a.preventDefault?a.preventDefault():window.event.returnValue=!1},domGenerator:function(a){var b,c;if(pc.isString(a))try{return b=document.createElement("div"),b.innerHTML=a,c=pc.childElems(b)[0]}finally{b=c=null}},getData:function(a,b){return"dataset"in a?a.dataset[b]:a.getAttribute("data-"+b)},setData:function(a,b,c){return"dataset"in a?a.dataset[b]=c:a.setAttribute("data-"+b,c)}},Placeholder=function(){function a(a,c){var e=c||d(a)||"";a.setAttribute("data-placeholder",e),b(a)}function b(a){""==a.value&&e(a),c(a,"focus",function(){a.holder&&(a.value="",a.className=a.className.replace(f,""))}),c(a,"blur",function(){""!=a.value?a.holder=!1:e(a)})}function c(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function d(a){return a.getAttribute("data-placeholder")}function e(a){a.holder=!0,a.className+=" "+f,a.value=d(a)}var f="placehold";return{run:a}}(),rightRule={global:{isAdmin:{text:"管理员权限",right:[-20,-40],relation:"or"},frontAdmin:{text:"前台管理员权限",right:[-20]},afterAdmin:{text:"后台管理员权限",right:[-40]},confirmAuthor:{text:"设置是否通知作者",right:[242]},report:{text:"举报",right:[37],url:"action/post/reportAbuse.do"},modify:{text:"修改",right:[244]},modifyAll:{text:"修改全部",right:[114]},cancelGrade:{text:"撤销自己评分",right:[33]},cancelGradeAll:{text:"撤销别人评分",right:[218]}},postbtn:{postNormal:{text:"发表新帖",right:[2],url:""},postVote:{text:"发起投票",right:[4],url:"type=vote"},postPk:{text:"发起PK",right:[253],url:"type=pk"},postReward:{text:"发起悬赏",right:[5],url:"hasReward=true"},postVoteReward:{text:"投票悬赏",right:[6],url:"type=vote&hasReward=true"},postActivity:{text:"发起活动",right:[7],url:"type=activity"},postHtml:{text:"发HTML",right:[9],url:"html.do"}},listadmin:{forumManage:{setAdmin:{text:"设置版块管理员",right:[109,213,214],relation:"or",url:"forum/forumRole.do"},sendmsg:{text:"群发消息给版主",right:[-40],url:"admin/user/sendmsg.do"},forumcp:{text:"版块管理",right:[115],url:"forumcp.do"},toHtmlBlock:{text:"设置版块HTML代码块",right:[-40],url:"admin/forum/toHtmlBlock.do"}},topicManage:{recoverTopic:{text:"恢复被删主题",right:[119],url:"toQueryTopic.do?action=deleteTopics"},recoverPost:{text:"恢复被删回帖",right:[119],url:"toQueryPost.do?action=deletePosts"},queryTopic:{text:"查询主题",right:[119],url:"toQueryTopic.do?action=forumTopics"}},userManage:{searchByIP:{text:"按IP查询用户",right:[121],url:"user/toSearch.do?action=ipSearch"},searchUid:{text:"查找用户",right:[121],url:"user/toSearch.do"},ipLock:{text:"维护被锁IP",right:[-40],url:"admin/user/ipLockList.do"},userLock:{text:"监狱",right:[248],url:"user/userLockList4Moderators.do"},reportList:{text:"查看举报",right:[120],url:"toReportList.do"},userRecommend:{text:"版主推荐列表",right:[236],url:"admin/plugin/recommend/userRecommendList.do"},onlineUser:{text:"查看在线用户",right:[113],url:"action/online_user.do"}},pannelManage:{right:[-10],pannelManageSub:{deleteTopic:{text:"删除",right:[100],url:"action/topic/batchDelete.do"},move:{text:"移动",right:[110],url:"action/topic/move.do"}},pannelManageSub2:{stick:{text:"置顶",right:[111,232],relation:"or",url:"action/topic/stick.do"},highlight:{text:"高亮",right:[112,118],relation:"or",url:"action/topic/highlight.do"},pick:{text:"精华",right:[102],url:"action/topic/pick.do"},upDown:{text:"提升下沉",right:[106],url:"action/topic/upDown.do"},lock:{text:"关闭打开",right:[101],url:"action/topic/lock.do"}}}},topicadmin:{topicManage:{right:[-20],topicManageSub:{deleteTopic:{text:"删除主题",right:[100],url:"action/topic/batchDelete.do"},upDown:{text:"提升下沉",right:[106],url:"action/topic/upDown.do"},stick:{text:"主题置顶",right:[111,232],relation:"or",url:"action/topic/stick.do"},cancelStick:{text:"取消置顶",right:[111,232],relation:"or",url:"action/topic/cancelStick.do"},highlight:{text:"主题高亮",right:[112,118],relation:"or",url:"action/topic/highlight.do"},pick:{text:"设置精华",right:[102],url:"action/topic/pick.do"},lock:{text:"关闭打开",right:[101],url:"action/topic/lock.do"},move:{text:"移动主题",right:[110],url:"action/topic/move.do"},build:{text:"设为盖楼",right:[105],url:"action/topic/build.do"},copy:{text:"复制主题",right:[245],url:"action/topic/copy.do"},userRecommend:{text:"版主推荐",right:[116],url:""},settingCMS:{text:"推荐至cms",right:[236],url:"admin/plugin/recommend/setting.do"},oneKeyDeleteTopic:{text:"一键删除",right:[249],url:""},live:{text:"设置直播帖",right:[252],url:"action/topic/live.ajax"},cancelLive:{text:"取消直播帖",right:[252],url:"action/topic/cancelLive.ajax"}}},batchManage:{batchManageSub:{deleteFloor:{text:"删除",right:[100],url:"action/post/batchDelete.do"},batchGrade:{text:"评分",right:[34],url:"action/post/grade.ajax"}}},userManage:{right:[-20],userManageSub:{toChangeUserScores:{text:"调积分",right:[204],url:"action/changeUserScores.do"},toLockUser:{text:"锁用户",right:[122,200],relation:"or",url:"action/lockUser.do"},toLockIP:{text:"锁IP",right:[201],url:"action/lockIp.do"},toMedalForm:{text:"授勋",right:[205],url:"action/user/medal_update.ajax"},clearUserPosts:{text:"清除用户发帖",right:[211],url:"user/clearPosts.do"},userSign:{text:"签名档",right:[209],url:"user/updateSignStatus.ajax"},userCenterOld:{text:"旧版个人中心",right:[-30],url:"user.do"}}},viewIP:{text:"查看IP",right:[221]},setPostTop:{text:"设为置顶",right:[251]},setDanger:{text:"设为危险",right:[254],url:"action/post/danger.do"}}},userGlobal={},userroleJs={getRight:function(){pc.ajax({url:pageGlobal.root+pageGlobal.righturl+"?fid="+pageGlobal.fid,type:"POST",async:!1,dataType:"text",success:function(a){var b=toolJs.evalJson(a),c={};for(i=0;i<b.rights.length;i++)c[b.rights[i]]=1;pageGlobal.rights=c,userGlobal=b.privateInfo}})},verifyRight:function(a){var b=a.right,c=(a.right[0],!1);if(a.relation){if("and"==a.relation){c=!0;for(var d=0;d<b.length;d++){var e=b[d];if(void 0==pageGlobal.rights[e]){c=!1;break}}}else if("or"==a.relation)for(var d=0;d<b.length;d++){var e=b[d];if(pageGlobal.rights[e]){c=!0;break}}}else{var e=b[0];pageGlobal.rights[e]&&(c=!0)}return c}};userroleJs.getRight(),pc.getElem("#otherforums")&&commonJs.hoverClass(pc.getElem("#otherforums"),"otherforums-hover"),pc.getElem("#Jfindforums")&&pc.addEvent(pc.getElem("#Jfindforums"),"click",function(){findForumBox()}),pc.getElem("#guideFindForum")&&pc.addEvent(pc.getElem("#guideFindForum"),"click",function(){findForumBox()}),new searchJs(".search").run(),function(){function changeFavbtnTitle(a){crumbFavbtn&&(a?"forum"==pageGlobal.pagetype?crumbFavbtn.setAttribute("title","取消收藏此版块"):"topic"==pageGlobal.pagetype&&crumbFavbtn.setAttribute("title","取消收藏此主题"):"forum"==pageGlobal.pagetype?crumbFavbtn.setAttribute("title","收藏此版块"):"topic"==pageGlobal.pagetype&&crumbFavbtn.setAttribute("title","收藏此主题"))}var toolFavbtn=pc.getElem("#JtoolbtnFav"),crumbFavbtn=pc.getElem("#Jcollect");if(changeFavbtnTitle(!1),commonJs.isloginstate()&&(toolFavbtn||crumbFavbtn)){var favPostdata={};"forum"==pageGlobal.pagetype?favPostdata.fid=pageGlobal.fid:"topic"==pageGlobal.pagetype&&(favPostdata.tid=pageGlobal.tid),pc.ajax({url:pageGlobal.root+pageGlobal.checkFavorite,type:"POST",data:favPostdata,success:function(data){var datajson=toolJs.evalJson(data),result=eval("("+data+")");0==datajson.status&&(changeFavbtnTitle(!0),crumbFavbtn&&pc.addClass(crumbFavbtn,"collected"),toolFavbtn&&pc.addClass(toolFavbtn,"collected"))}});var favbtns=[];toolFavbtn&&favbtns.push(toolFavbtn),crumbFavbtn&&favbtns.push(crumbFavbtn),pc.each(favbtns,function(favbtn){pc.addEvent(favbtn,"click",function(e){toolJs.preventDefault(e),pc.hasClass(favbtn,"collected")?favPostdata.action="undo":favPostdata.action="do",pc.ajax({url:pageGlobal.root+pageGlobal.favoriteurl,type:"POST",data:favPostdata,success:function(data){var result=eval("("+data+")"),datajson=toolJs.evalJson(data);0==datajson.status?"do"==datajson.action?(changeFavbtnTitle(!0),crumbFavbtn&&pc.addClass(crumbFavbtn,"collected"),toolFavbtn&&pc.addClass(toolFavbtn,"collected")):(changeFavbtnTitle(!1),crumbFavbtn&&pc.removeClass(crumbFavbtn,"collected"),toolFavbtn&&pc.removeClass(toolFavbtn,"collected")):commonJs.alertMessage("服务器繁忙，请稍后再试")}})})})}}(),poptip.prototype={init:function(a,b,c,d){null!=a&&void 0!=a&&""!=b&&void 0!=b&&(c=c||{},this.config=this.extend(c),this.dom=a,this.text=b,this.withcookie=d,this.showtip())},extend:function(a){return{x:a.x||0,y:a.y||0,width:a.width||135,cookieName:a.cookieName||"showtip_flag",className:a.className||""}},showtip:function(){var a=this.config;this.withcookie?pc.getCookie(a.cookieName)||this.createtip():this.createtip()},createtip:function(){var a=this.config,b=this,c=toolJs.getOffset(this.dom),d='<div class="poptip '+a.className+'"><div class="ctn">'+this.text+'</div><em class="btn png24"></em><em class="corner png24"></em></div>',e=toolJs.domGenerator(d);this.tipobj=e,pc.setStyle(e,{width:a.width+"px",left:c.left+a.x+"px",top:c.top+a.y+"px"}),pc.getElem("body").appendChild(e);var f=pc.getElem(".btn",e);pc.addEvent(f,"click",function(){pc.hide(e),b.withcookie&&pc.setCookie(a.cookieName,"1",1,"","/")})},setPosition:function(a,b,c){if(a&&this.tipobj){var d=toolJs.getOffset(a);pc.setStyle(this.tipobj,{left:d.left+b+"px",top:d.top+c+"px"})}}};var verifyJs={verifyFun:{required:function(a){return""==pc.trim(a.value)?!0:!1},max:function(a,b){return pc.trim(a.value).length>b?!0:!1},znmax:function(a,b){return toolJs.getTextCount(pc.trim(a.value))>b?!0:!1}},verifyForm:function(a,b){var c=toolJs.inputSelector(a),d={};if(c.length>0){if(pc.each(c,function(a){if(a.getAttribute("data-verify")&&""!=a.getAttribute("data-verify")){for(var b=a.getAttribute("data-verify"),c=b.split(","),e="",f=0;f<c.length;f++){var g=c[f],h=null,i="",j="";if(g.split("_").length>1?(i=g.split("_")[0],j=g.split("_")[1],h=verifyJs.verifyFun[i](a,j)):(i=g,h=verifyJs.verifyFun[i](a)),h){e=i;break}}if(""!=e)return d.vname=a.getAttribute("name"),d.vtype=e,!1}}),toolJs.isBlankObj(d))return!1;var e=d.vname,f=d.vtype;if(b[e])return b[e][f]||"缺少错误文字提示"}}},responseJs={reload:function(a){var b=toolJs.evalJson(a);0==b.status?window.location.reload():commonJs.alertMessage(b.desc)},redirect:function(a){var b=toolJs.evalJson(a);if(0==b.status){var c=window.location.href;c.indexOf("#")>0&&(c=c.substring(0,c.indexOf("#"))),b.postId&&b.postId>0&&(c=c+"#post_"+b.postId),commonJs.pageRedirect(c)}else commonJs.alertMessage(b.desc)}};popform.prototype={createPop:function(){if(this.config.pophtml){var a=this.config.popclass||"",b='<div class="popform '+a+'">',c="</div>",d='<div class="pop-header" data-event="popDrag"><span class="pop-header-title">'+this.config.title+'</span><a href="javascript:;" class="pop-header-close" data-event="popClose"></a></div>',e="";userroleJs.verifyRight(rightRule.global.confirmAuthor)||(e=' checked disabled="true"');var f='<div class="pop-footer"><label for="sendmsg"><input name="sendmsg" id="sendmsg" class="checkbox" type="checkbox"'+e+' />通知作者</label><a href="javascript:;" class="pop-submit" data-event="sendMessage">确定</a></div>',g='<div class="pop-footer"><a href="javascript:;" class="pop-submit" data-event="sendMessage">确定</a></div>';if(this.config.nofooter)var h=b+d+this.config.pophtml+c;else if(this.config.noauthor)var h=b+d+this.config.pophtml+g+c;else var h=b+d+this.config.pophtml+f+c;if(-1!=h.indexOf("${reasonbox}")){for(var i='<div class="reason-box"><div class="hd"><span class="mark">可选理由</span></div><div class="bd"><ul class="selectreason">',j=commonVar.reason,k=0;k<j.length;k++)i+='<li><a href="javascript:;" data-event="setreason">'+j[k]+"</a></li>";i+='</ul><textarea id="JReasonArea"></textarea></div></div>',h=h.replace(/\${reasonbox}/g,i)}return h}},initEvent:function(){if(this.config.popevent){var a={"click#popClose":function(a,b){this.remove()},"click#setreason":function(a,b){var c=b.innerHTML;pc.getElem("#JReasonArea").value=c}};return toolJs.merge(a,this.config.popevent)}},init:function(){var a=this.createPop(),b=this.initEvent();if(a&&b){var c=new Popbox({el:function(){return a},events:b,dragable:!0,style:this.config.style||{}}).show();return c.postdata=this.postdata,c}}},popform.postform=function(a,b,c){if(!popform.verifyform()){pc.getElem(".tips-error").innerHTML="",pc.getElem(".tips-error").style.display="none";var d=pc.getElem(".pop-submit",c.el);if(d){if(pc.hasClass(d,"pop-sending"))return;pc.addClass(d,"pop-sending"),d.innerHTML="发送中"}pc.ajax({url:a,type:"POST",data:b,success:function(a){var b=toolJs.evalJson(a);0==b.status?window.location.reload():(pc.getElem(".tips-error").innerHTML=b.desc,pc.getElem(".tips-error").style.display="block"),d&&(pc.removeClass(d,"pop-sending"),d.innerHTML="确认")}})}},popform.verifyform=function(){return pc.getElem("#JReasonArea")&&0==toolJs.getTextLength(pc.getElem("#JReasonArea"))?(pc.getElem(".tips-error").innerHTML="操作原因不能为空!",pc.getElem(".tips-error").style.display="block",!0):void 0};var curUsername=commonJs.isloginstate(),curSessionID=pc.getCookie(pageGlobal.sessionname);if(topicGlobal.callDymaticIntf&&pc.ajax({url:pageGlobal.root+topicGlobal.topictypeurl+"?tid="+pageGlobal.tid,type:"GET",async:!1,success:function(a){var b=toolJs.evalJson(a);toolJs.extend(userGlobal,b)}}),pc.browser.msie){var docTitle=document.title;setTimeout(function(){document.title=docTitle},500)}var upload_Img={},keepSrc=pageGlobal.uploadKeepSource?"yes":"no",readExif=pageGlobal.readExif?"yes":"no",noWater=pageGlobal.noWater?"9":"8",resizedImgCondition=pageGlobal.uploadKeepSource?"5120KB":"512KB",upload_url=pageGlobal.upcRoot+pageGlobal.uploadUrl+"?command=10001&command=10002&command=10004&command="+noWater;pageGlobal.asynReq&&(upload_url+="&command=41&command=42&command=43");var elevatorJs={run:function(){var a=pc.getElem("#Jelevator input"),b=pc.getElem("#Jelevator .btn");a&&pc.addEvent(a,"keyup",function(a){this.value=this.value.replace(/[^\d]/g,""),13==a.keyCode&&elevatorJs.gotoelevator(this.value)}),b&&pc.addEvent(b,"click",function(){a.value&&elevatorJs.gotoelevator(a.value)})},gotoelevator:function(a){var b=a.replace(/[^\d]/g,"");if(""!=b){var c=pageGlobal.root+topicGlobal.elevatorurl+"?tid="+pageGlobal.tid+"&floor="+b;pc.get(c,function(a){var b=toolJs.evalJson(a);0==b.status?window.location.href=pageGlobal.root+"p"+pageGlobal.tid+"_"+b.pid+".html":commonJs.alertMessage("没有此楼层")})}}};elevatorJs.run();var hidecont=pc.getElems(".topiccontent .hidecont");if(hidecont.length>0){var hideconturl=pageGlobal.root+topicGlobal.hideconturl+"?tid="+pageGlobal.tid;pc.get(hideconturl,function(a){var b=toolJs.evalJson(a);b.length>0&&pc.each(b,function(a){var b=commonJs.getElemByData("hidecont","data-hid",a.seq);if(b)if(a.state){pc.addClass(b,"hidecont-show"),b.innerHTML='<span class="txt txt-top">***以下是隐藏信息内容，'+a.tips+'***</span><div class="cont">'+a.message+'</div><span class="txt txt-btm">以上是隐藏信息内容</span>';var c=pc.getElems(".LazyloadImg",b);c.length>0&&pc.each(c,function(a){var b=a.getAttribute("src2"),c=new Image;c.onload=function(){c.width>790&&(a.style.width="790px",a.style.height=Math.floor(c.height/(c.width/790))+"px"),a.setAttribute("src",b),a.removeAttribute("src2")},c.src=b,a.title="点击查看原图",pc.addEvent(a,"click",function(){viewTopicpic(a)})})}else pc.addClass(b,"hidecont-hide"),b.innerHTML='<span class="txt">***'+a.message+'*** <a href="#Jfastreply">点击回复</a></span>'})})}var restoreTopicBtn=pc.getElem("#JrestoreTopic");restoreTopicBtn&&pc.addEvent(restoreTopicBtn,"click",function(){var a=pageGlobal.root+topicGlobal.restoreurl+"?tids="+pageGlobal.tid;pc.post(a,function(a){var b=toolJs.evalJson(a);0==b.status?commonJs.alertMessage(b.desc,"refresh"):commonJs.alertMessage(b.desc)})});var topPostUrl=pageGlobal.root+topicGlobal.topPostUrl+"?tid="+pageGlobal.tid;if(topicGlobal.showTopPosts&&pc.get(topPostUrl,function(a){var b=toolJs.evalJson(a);if(b.topPosts.length>0){var c='<div class="hd"><div class="mark">精彩回复</div></div>';c+='<div class="bd">',pc.each(b.topPosts,function(a,d){var e=pageGlobal.centerurl+a.authorId,f=commonJs.getfaceUrl(a.authorId),g=pageGlobal.root+topicGlobal.advanceposturl+"?fid="+b.fid+"&tid="+pageGlobal.tid+"&qid="+a.pid+"&action=reply&gotoAdvance=true";c+='<div class="topreplyitem" data-rpid="'+a.pid+'">',c+='<a href="'+e+'" class="face" target="_blank"><img src="'+f+'" width="36" height="36" alt="" /></a><a href="'+e+'" class="name" target="_blank">'+a.nickName+'</a><span class="replytxt toe" title="'+a.message+'">'+a.message+'</span><a href="'+a.postLink+'" class="fname">'+a.floor+'楼</a><a href="'+g+'" class="link-reply">回复</a>',userroleJs.verifyRight(rightRule.topicadmin.setPostTop)&&(c+='<a class="link-cancel" href="javascript:;">取消置顶</a>'),c+="</div>"}),c+="</div>",pc.getElem(".topreplybox").innerHTML=c,userroleJs.verifyRight(rightRule.topicadmin.setPostTop)&&pc.each(pc.getElems(".topreplyitem"),function(a){var b=a.getAttribute("data-rpid"),c=pc.getElem(".link-cancel",a),d=function(){var a=pageGlobal.root+topicGlobal.cancelPostTopUrl+"?tid="+pageGlobal.tid+"&fid="+pageGlobal.fid+"&pid="+b;pc.post(a,function(a){var b=toolJs.evalJson(a);commonJs.alertMessage(b.desc,"refresh")})};pc.addEvent(c,"click",function(){commonJs.confirmMessage("确定对该回帖取消置顶",d)})})}}),void 0!=userGlobal.vote&&1==pageGlobal.pageno){var voteBox='<div class="votecontent">';voteBox+='<div class="hd"><span class="mark">'+(userGlobal.vote.multiMax>1?"多":"单")+'项投票</span><span class="info">';var viewVotePeople="",voteByCreate="";userGlobal.vote.canViewVoter&&(viewVotePeople='<i>|</i><a href="javascript:;" id="JviewVotePeople" class="orange">查看参与投票的人</a>'),userGlobal.vote.createAtMin&&(voteByCreate="参与者注册时间须早于 "+userGlobal.vote.createAtMin+"<i>|</i>"),voteBox+="（参与者贡献值必须大于 "+userGlobal.vote.contributionMin+"<i>|</i>"+voteByCreate+'<span class="orange">'+userGlobal.vote.totalCount+"</span> 人参与投票"+viewVotePeople+"）</span></div>",
voteBox+='<div class="bd">';var voteBoxState="",voteBoxinfo=userGlobal.vote.expiryInfo?'<span class="info"><i class="icon png24"></i><em>'+userGlobal.vote.expiryInfo+"</em></span>":"";userGlobal.vote.voteEnd||userGlobal.vote.hasVoted||userGlobal.loginId==pageGlobal.uid?(voteBox+='<ul class="voteitems vote-result">',pc.each(userGlobal.vote.items,function(a,b){if(0==userGlobal.vote.totalCount)var c=0;else var c=Math.round(1e3*parseFloat(a.count/userGlobal.vote.totalCount))/10;var d=userGlobal.vote.myVoteIds&&toolJs.inArray(a.voteItemId,userGlobal.vote.myVoteIds);voteBox+='<li class="voteitem cf'+(d?" sel":"")+'" data-value="'+a.voteItemId+'">',voteBox+='<div class="txt">'+(b+1)+"、"+a.content+"</div>",voteBox+='<div class="result"><span class="bar"><i style="width:'+c+'%"></i></span><span class="percent">'+c+'%</span><span class="num">('+a.count+")</span></div>",(d||userGlobal.vote.showBtn)&&(voteBox+='<em class="state"></em>'),voteBox+="</li>"}),voteBox+="</ul>",voteBoxState=userGlobal.vote.showBtn?'<a href="javascript:;" class="btn" id="Jvotebtn">提交</a>'+voteBoxinfo:userGlobal.vote.voteEnd?'<span class="btn btn-disable">已结束</span>'+voteBoxinfo:'<span class="btn btn-disable">已投票</span>'+voteBoxinfo):(voteBox+='<ul class="voteitems vote-form">',pc.each(userGlobal.vote.items,function(a,b){voteBox+='<li class="voteitem" data-value="'+a.voteItemId+'">',voteBox+='<div class="txt">'+(b+1)+"、"+a.content+"</div>",voteBox+='<em class="state"></em>',voteBox+="</li>"}),voteBox+="</ul>",voteBoxState=userGlobal.vote.showBtn?'<a href="javascript:;" class="btn" id="Jvotebtn">提交</a>'+voteBoxinfo:'<div class="info-wrong"><i class="icon"></i>您需要登录后才可以参加投票 <a href="javascript:;" onclick="commonJs.gotoLoginPage();">立即登录</a></div>'),voteBox+="</div>",voteBox+='<div class="vote-action">'+voteBoxState+"</div>",voteBox+="</div>";var voteBoxObj=toolJs.domGenerator(voteBox);if(pc.getElem(".topiccontent")&&pc.insertAfter(pc.getElem(".topiccontent"),voteBoxObj),userGlobal.vote.canViewVoter){var viewVoteItem="";pc.each(userGlobal.vote.items,function(a){var b="";if(toolJs.getTextCount(a.content)>20){for(var c=0;c<a.content.length;c++)if(toolJs.getTextCount(a.content.substr(0,c))>=20){b=a.content.substr(0,c)+"...";break}}else b=a.content;viewVoteItem+='<option value="'+a.voteItemId+'" >'+b+"</option>"});var viewVotebox='<div id="viewVoteMenber"><div class="pop-header" data-event="popDrag"><span class="pop-header-title">查看投票参与者</span><a href="javascript:;" class="pop-header-close" data-event="popClose"></a></div><div class="pop-section"><div class="form-wrap"><div class="select-item"><span class="tit">选项：</span><select id="JgetVoteResult">'+viewVoteItem+'</select></div><div class="info-item" id="JshowVoteResult"></div></div></div><div class="pop-footer"><a href="javascript:;" class="pop-submit" data-event="popClose">确定</a></div></div>',viewVote=pc.getElem("#JviewVotePeople");pc.addEvent(viewVote,"click",function(){new Popbox({el:function(){return viewVotebox},events:{"click#popClose":function(a,b){this.remove()}},dragable:!0}).show();pc.getElem("#JgetVoteResult").onchange=function(){var a=pageGlobal.root+topicGlobal.voteresulturl+"?tid="+pageGlobal.tid+"&itemId="+this.value;pc.get(a,function(a){var b=toolJs.evalJson(a),c="";b.length>0?pc.each(b,function(a){c+='<a href="'+pageGlobal.centerurl+a.uid+'" target="_blank">'+a.nickname+"</a>"}):c="暂无记录",pc.getElem("#JshowVoteResult").innerHTML=c})},pc.getElem("#JgetVoteResult").onchange()})}userGlobal.vote.showBtn&&(userGlobal.vote.multiMax>1?pc.each(pc.getElems(".voteitem"),function(a,b){pc.addEvent(a,"click",function(){pc.hasClass(a,"sel")?pc.removeClass(a,"sel"):pc.addClass(a,"sel")})}):pc.each(pc.getElems(".voteitem"),function(a,b){pc.addEvent(a,"click",function(){pc.each(pc.getElems(".voteitem"),function(a){pc.removeClass(a,"sel")}),pc.addClass(a,"sel")})}),pc.addEvent(pc.getElem("#Jvotebtn"),"click",function(){var a=[];if(pc.each(pc.getElems(".voteitem"),function(b){pc.hasClass(b,"sel")&&a.push(b.getAttribute("data-value"))}),a.length>0){var b=pageGlobal.root+topicGlobal.voteurl,c={tid:pageGlobal.tid,voteSelection:a};pc.ajax({url:b,type:"POST",data:c,success:function(a){responseJs.redirect(a)}})}else commonJs.alertMessage("请选择投票项")}))}if(void 0!=userGlobal.pk&&1==pageGlobal.pageno){pc.getElem("#redPoint").innerHTML=userGlobal.pk.redPoint,pc.getElem("#bluePoint").innerHTML=userGlobal.pk.bluePoint;var pktextarea=pc.getElem("#pkTextarea"),redCount=userGlobal.pk.redCount,blueCount=userGlobal.pk.blueCount,updatePkBar=function(){pc.getElem("#redcount").innerHTML=redCount,pc.getElem("#bluecount").innerHTML=blueCount};updatePkBar();var getPkPersen=function(){var a=Math.round(790*redCount/(redCount+blueCount));return 79>a&&(a=79),a>711&&(a=711),a};redCount!=blueCount&&pc.setStyle(pc.getElem("#JpkRedside"),"width",getPkPersen()+"px");var setPkTextarea=function(a){0==a?pktextarea.setAttribute("data-placeholder","#支持红方："+userGlobal.pk.redPoint):1==a&&pktextarea.setAttribute("data-placeholder","#支持蓝方："+userGlobal.pk.bluePoint),pktextarea.value="",Placeholder.run(pktextarea)},slideDownPKform=function(){var a=pc.getElem("#JpkCaptchabox");if(userGlobal.needCaptcha)if(a)a.style.display="block",pc.getElem("#JpkcaptchaImg").src=commonVar.captchaSrc+"?"+(new Date).getTime();else{var b='<div class="captchabox" id="JpkCaptchabox">验证码：<input id="JpkCaptcha" class="ipt ipt-captcha" type="text" /><img src="" id="JpkcaptchaImg" /><a href="javascript:;" id="Jpkcaptchabtn">看不清？换一张</a></div>';a=toolJs.domGenerator(b),pc.insertAfter(pc.getElem("#JpkReply"),a),pc.getElem("#JpkcaptchaImg").src=commonVar.captchaSrc+"?"+(new Date).getTime(),pc("#Jpkcaptchabtn").addEvent("click",function(){pc.getElem("#JpkcaptchaImg").src=commonVar.captchaSrc+"?"+(new Date).getTime()})}else a&&(a.style.display="none");pc.slideDown(pc.getElem("#JpkForm"),150)},pkRedBtn="",pkBlueBtn="";if(userGlobal.pk.isEnd?(pkRedBtn=toolJs.domGenerator('<span class="btn btn-disable">已结束PK</span>'),pkBlueBtn=toolJs.domGenerator('<span class="btn btn-disable">已结束PK</span>')):1==userGlobal.pk.support?(pkRedBtn=toolJs.domGenerator('<span class="btn btn-disable">支持红方</span>'),pkBlueBtn=toolJs.domGenerator('<a href="javascript:;" class="btn">发表意见</a>'),pc.addClass(pc.getElem("#JpkForm"),"pkForm-blueside"),setPkTextarea(1)):0==userGlobal.pk.support?(pkRedBtn=toolJs.domGenerator('<a href="javascript:;" class="btn">发表意见</a>'),pkBlueBtn=toolJs.domGenerator('<span class="btn btn-disable">支持蓝方</span>'),pc.addClass(pc.getElem("#JpkForm"),"pkForm-redside"),setPkTextarea(0)):(pkRedBtn=toolJs.domGenerator('<a href="javascript:;" class="btn" data-var="red">支持红方</a>'),pkBlueBtn=toolJs.domGenerator('<a href="javascript:;" class="btn" data-var="blue">支持蓝方</a>')),pc.getElem("#JpkContent .redside .action").appendChild(pkRedBtn),pc.getElem("#JpkContent .blueside .action").appendChild(pkBlueBtn),pc.getElems("#JpkContent a.btn").length>0&&pc.each(pc.getElems("#JpkContent a.btn"),function(a){pc.addEvent(a,"click",function(){if(curUsername){var b=a.getAttribute("data-var");if(b){{a.innerHTML}a.removeAttribute("data-var");var c=pageGlobal.root+topicGlobal.supportUrl,d={tid:pageGlobal.tid,supportOpinion:"red"==b?userGlobal.pk.redID:userGlobal.pk.blueID};pc.post(c,d,function(c){var d=toolJs.evalJson(c);0==d.status?(a.innerHTML="发表意见","red"==b?(pc.getElem("#JpkContent .blueside .action").innerHTML='<span class="btn btn-disable">支持蓝方</span>',pc.addClass(pc.getElem("#JpkForm"),"pkForm-redside"),redCount+=1,setPkTextarea(0)):"blue"==b&&(pc.getElem("#JpkContent .redside .action").innerHTML='<span class="btn btn-disable">支持红方</span>',pc.addClass(pc.getElem("#JpkForm"),"pkForm-blueside"),blueCount+=1,setPkTextarea(1)),updatePkBar(),pc.animate(pc.getElem("#JpkRedside"),{width:getPkPersen()+"px"},500,"linear",function(){slideDownPKform()})):(a.setAttribute("data-var",b),commonJs.alertMessage(d.desc))})}else slideDownPKform()}else commonJs.gotoLoginPage()})}),curUsername&&!userGlobal.pk.isEnd){pc.addEvent(pc.getElem("#JpkForm .btn-close"),"click",function(){pc.slideUp(pc.getElem("#JpkForm"),150)});var pkReplyBtn=pc.getElem("#JpkReply");pc.addEvent(pkReplyBtn,"click",function(){if(!pc.hasClass(this,"btn-sending")){if(""==pc.trim(pktextarea.value))return commonJs.alertMessage("回复内容不能为空"),!1;if(pc.trim(pktextarea.value)==pktextarea.getAttribute("data-placeholder"))return commonJs.alertMessage("请输入正确回复内容"),!1;if(userGlobal.needCaptcha&&pc.getElem("#JpkCaptcha")&&""==pc.trim(pc.getElem("#JpkCaptcha").value))return commonJs.alertMessage("验证码不能为空"),!1;pc.addClass(this,"btn-sending");var a=0;pc.hasClass(pc.getElem("#JpkForm"),"pkForm-redside")?a=0:pc.hasClass(pc.getElem("#JpkForm"),"pkForm-blueside")&&(a=1);var b={fid:pageGlobal.fid,tid:pageGlobal.tid,message:encodeURIComponent(pc.trim(pktextarea.value)),sendMsg:!0,quoteSendMsg:!0,feedbackPost:!0,support:a};userGlobal.needCaptcha&&pc.getElem("#JpkCaptcha")&&(b.captcha=pc.trim(pc.getElem("#JpkCaptcha").value)),pc.ajax({url:pageGlobal.root+topicGlobal.replyurl,type:"POST",data:b,success:function(a){var b=toolJs.evalJson(a);if(0==b.status){pktextarea.value="",pc.slideUp(pc.getElem("#JpkForm"),150);var c=location.href;c.indexOf("?")>-1&&(c=c.substr(0,c.indexOf("?"))),c=c+"?rt="+(new Date).getTime()+"#JpkContent",commonJs.tipMessage("回复成功",!0,c)}else commonJs.alertMessage(b.desc);pc.removeClass(pkReplyBtn,"btn-sending")}})}}),pc.addEvent(pktextarea,"keydown",function(a){(a.ctrlKey&&13==a.keyCode||10==a.keyCode)&&pkReplyBtn.click()})}if(pc.getElem("#JpkReplyRed")||pc.getElem("#JpkReplyBlue")){var pkShowPoint=function(a,b){var c="";0==b.length?c='<div class="empty">该观点暂时无人回复</div>':pc.each(b,function(a,b){var d=pageGlobal.centerurl+a.authorId,e=commonJs.getfaceUrl(a.authorId),f=pageGlobal.root+topicGlobal.advanceposturl+"?fid="+userGlobal.pk.fid+"&tid="+pageGlobal.tid+"&qid="+a.pid+"&action=reply&gotoAdvance=true";c+='<div class="item cf">',c+='<a href="'+d+'" class="face" target="_blank"><img src="'+e+'" width="36" height="36" alt="" /></a>',c+='<div class="ctn">',c+='<div class="info1"><a href="'+d+'" target="_blank" class="username">'+a.nickName+'</a><a href="'+a.postLink+'" class="fname">'+a.floor+"楼</a></div>",c+='<div class="txt">'+a.message+"</div>",c+='<div class="info2"><span class="date">'+a.createAt+'</span><a href="'+f+'" target="_blank" class="link">回复</a></div>',c+="</div>",c+="</div>"}),pc.getElem("#"+a+" .bd").innerHTML=c};pkShowPoint("JpkReplyRed",userGlobal.pk.redSide),pkShowPoint("JpkReplyBlue",userGlobal.pk.blueSide);var pkPointSlider=function(a){var b=pc.getElems("#"+a+" .item");pc.getElem("#"+a)&&b.length>3&&new pc.tab({target:b,control:!1,effect:"slide",direction:"y",height:93,autoPlay:!0,stay:3e3,merge:!0})};pkPointSlider("JpkReplyRed"),pkPointSlider("JpkReplyBlue")}}if(void 0!=userGlobal.activity&&1==pageGlobal.pageno){var activeInfo=userGlobal.activity.activity;if(activeInfo){pc.each(activeInfo,function(a,b){var c=pc.getElem(".activecontennt ."+b);c&&(c.innerHTML=a)});var activeCoverimg=pc.getElem(".activeCoverImg");activeCoverimg.onload=function(){var a=185,b=250;this.style.width="auto",this.style.height="auto",this.style.left="auto",this.style.top="auto";var c=this.width,d=this.height,e=c/a,f=d/b;if(c>a||d>b)if(c/d>a/b){var g=Math.ceil(c/f);this.style.height=b+"px",this.style.width=g+"px",this.style.left=(a-g)/2+"px"}else{var h=Math.ceil(d/e);this.style.width=a+"px",this.style.height=h+"px",this.style.top=(b-h)/2+"px"}else this.style.left=(a-c)/2+"px",this.style.top=(b-d)/2+"px"},activeCoverimg.src=activeInfo.imgUrl}if(userGlobal.loginId==pageGlobal.uid||userroleJs.verifyRight(rightRule.global.afterAdmin)){var viewSignupLink=toolJs.domGenerator('<a class="btn" href="javascript:;">查看</a>');pc.addEvent(viewSignupLink,"click",function(a){var b=pageGlobal.root+topicGlobal.viewactiveurl+"?type=all&keepThis=true&tid="+pageGlobal.tid+"&fid="+pageGlobal.fid;popiframe("活动报名者",b)}),pc.getElem("#activeSign").appendChild(viewSignupLink);var viewApproveLink=toolJs.domGenerator('<a class="btn" href="javascript:;">查看</a>');pc.addEvent(viewApproveLink,"click",function(a){var b=pageGlobal.root+topicGlobal.viewactiveurl+"?type=censor&keepThis=true&tid="+pageGlobal.tid+"&fid="+pageGlobal.fid;popiframe("活动报名者",b)}),pc.getElem("#activeApprove").appendChild(viewApproveLink)}if(userGlobal.activity.allowExportAndCensor){var activeExport=toolJs.domGenerator('<a class="btn" href="'+pageGlobal.root+"activity/export.do?tid="+pageGlobal.tid+'">导出</a>');pc.getElem("#activeSign").appendChild(activeExport);var activeApprove=toolJs.domGenerator('<a class="btn" href="javascript:;" id="JactiveAppove">审核</a>');pc.getElem("#activeApprove").appendChild(activeApprove),pc.addEvent(activeApprove,"click",function(a){var b=pageGlobal.root+topicGlobal.viewactiveurl+"?type=joined&keepThis=true&tid="+pageGlobal.tid+"&fid="+pageGlobal.fid;popiframe("审核报名者",b)})}var activeVerifyText={name:{required:"请填写真实姓名"},phone:{required:"请填写联系电话"},persons:{required:"请填写参加人数"},city:{required:"请填写所在城市"},email:{required:"请填写电子邮件"},postNum:{required:"请填写邮政编码"},address:{required:"请填写邮寄地址"},description:{required:"请填写特别说明",max:"特别说明不能超过100个字符!"}},activePopForm,activeAction=pc.getElem("#activeAction");userGlobal.activity.showJoinBtn&&(activeAction.innerHTML='<a id="Jjoinactive" class="btn" href="javascript:;">我要参加</a>'),userGlobal.activity.hasJoin&&(1==userGlobal.activity.censorStatus?activeAction.innerHTML='<span class="tip"><i class="icon"></i>您已经参加了此活动</span>':-1==userGlobal.activity.censorStatus?activeAction.innerHTML='<a id="Jjoinactive" class="btn" href="javascript:;">修改申请</a><span class="tip"><i class="icon"></i>您的加入申请被拒绝</span>':0==userGlobal.activity.censorStatus&&(activeAction.innerHTML='<a id="Jjoinactive" class="btn" href="javascript:;">修改申请</a><span class="tip"><i class="icon"></i>申请已发出，请等待审批</span>')),userGlobal.activity.expire&&(activeAction.innerHTML='<span class="btn btn-disable">已结束</span>'),curUsername||(activeAction.innerHTML='<span class="tip"><i class="icon"></i>您需要登录后才可以参加活动 <a href="javascript:;" onclick="commonJs.gotoLoginPage();">立即登录</a></span>'),pc.getElem("#Jjoinactive")&&pc.addEvent(pc.getElem("#Jjoinactive"),"click",function(){if(activePopForm)activePopForm.show();else{var a=pc.getElem("#activeForm").innerHTML,b={"click#popClose":function(a,b){this.close()},"click#sendMessage":function(a,b){var c=verifyJs.verifyForm(this.el,activeVerifyText);if(c)return pc.getElem(".tips-error").innerHTML=c,pc.getElem(".tips-error").style.display="block",!1;pc.getElem(".tips-error").style.display="none";var d=toolJs.serialize(this.el)+"&tid="+pageGlobal.tid,e=pageGlobal.root+topicGlobal.activeurl;pc.post(e,d,function(a){responseJs.redirect(a)})}},c={pophtml:a,popevent:b,title:"我要参加",popclass:"pop-activeform",noauthor:!0};activePopForm=new popform(c),userGlobal.activity.activityItem&&pc.each(userGlobal.activity.activityItem,function(a,b){var c=pc.getElem(".pop-activeform ."+b);c&&(c.value=a)})}})}if(void 0!=userGlobal.reward&&pc.each(pc.getElems(".replyfloor"),function(a){if(!pc.hasClass(a,"replyfloor-lock")){var b=a.getAttribute("data-pid"),c=a.getAttribute("data-uid");if(userGlobal.reward.rewardRemain&&userGlobal.reward.rewardRemain>0){var d=pc.getElem(".replyfloor-reward .price",a);if(null==d&&userGlobal.loginId!=c){var e=toolJs.domGenerator('<input type="text" class="ipt ipt-reward" />'),f=toolJs.domGenerator('<a href="javascript:;" class="btn btn-reward">发放悬赏</a>');pc.getElem(".replyfloor-reward",a).appendChild(e),pc.getElem(".replyfloor-reward",a).appendChild(f),pc.addEvent(e,"keyup",function(a){this.value=this.value.replace(/[^\d]/g,"")}),pc.addEvent(f,"click",function(){var a={tid:pageGlobal.tid};pc.each(pc.getElems(".ipt-reward"),function(b){if(""!=pc.trim(b.value)){var c;pc.each(pc.parentElems(b),function(a){return pc.hasClass(a,"replyfloor")?(c=a,!1):void 0});var d=c.getAttribute("data-pid");a["reward"+d]=pc.trim(b.value)}});var b=pageGlobal.root+topicGlobal.rewardurl;pc.post(b,a,function(a){responseJs.reload(a)})})}}if(0==userGlobal.reward.bestReplyId&&userGlobal.loginId!=c){var g=toolJs.domGenerator('<a href="javascript:;" class="setbest">设为最佳答案</a>');pc.getElem(".replyfloor-reward",a).appendChild(g);var h=function(){var a=pageGlobal.root+topicGlobal.bestreplyurl,c={pid:b,tid:pageGlobal.tid};pc.post(a,c,function(a){var b=toolJs.evalJson(a);0==b.status?commonJs.alertMessage("设置成功","refresh"):commonJs.alertMessage(b.desc)})};pc.addEvent(g,"click",function(){commonJs.confirmMessage("确定要设置此帖为最佳回复吗？",h)})}}}),void 0!=userGlobal.trade&&1==pageGlobal.pageno){var tradeInfo=null;userGlobal.trade.isClose?userGlobal.trade.detail&&(tradeInfo=userGlobal.trade.detail):tradeInfo=userGlobal.trade.detail,tradeInfo&&(pc.each(tradeInfo,function(a,b){var c=pc.getElem(".tradecontent ."+b);c&&("acceptExchange"==b?c.innerHTML=a?"是":"否":"contactInfo"==b?c.innerHTML='<a href="javascript:;" id="JviewTradeinfo">查看</a>':c.innerHTML=a)}),tradeInfo.exchange&&pc.each(pc.getElems(".trade-info .hide"),function(a){pc.removeClass(a,"hide")}),pc.getElem("#JviewTradeinfo")&&pc.addEvent(pc.getElem("#JviewTradeinfo"),"click",function(){this.parentNode.innerHTML=tradeInfo.contactInfo}));var closeTrade;userGlobal.trade.canModifyTrade&&(closeTrade=toolJs.domGenerator(userGlobal.trade.isClose?'<a id="JcloseTrade" data-close="0" href="javascript:;" class="btn btn-open">开启交易</a>':'<a id="JcloseTrade" data-close="1" href="javascript:;" class="btn btn-close">关闭交易</a>'),pc.getElem(".trade-action").appendChild(closeTrade),pc.addEvent(pc.getElem("#JcloseTrade"),"click",function(){var a=this.getAttribute("data-close"),b=function(b,c){var d=pageGlobal.root+topicGlobal.tradeurl,e={isClose:a,tid:pageGlobal.tid,pid:pageGlobal.pid,fid:pageGlobal.fid};pc.post(d,e,function(a){responseJs.redirect(a)})};"1"==a?commonJs.confirmMessage("确定要关闭此交易帖吗？",b):commonJs.confirmMessage("确定要重新开放交易帖吗？",b)}))}var floorJs={createMedalBox:function(a,b){var c='<div class="medalbox"><div class="inner">';pc.each(a,function(a){c+='<img src="'+a.image+'" width="20" height="20" alt="'+a.name+'" title="'+a.name+'" />'}),c+="</div></div>";var d=toolJs.domGenerator(c);return new medalJs(d,b),d},createRoleicon:function(a){var b=toolJs.domGenerator('<span class="roleicon roleicon-'+a+'"></span>');return b},showRoleDesc:function(a,b){var c='<ul class="des">';pc.each(a,function(a){c+="<li>"+a+"</li>"}),c+='</ul><i class="arrow"></i>',b.innerHTML+=c;var d=18+22*a.length;pc.setStyle(pc.getElem(".des",b),{top:"-"+d+"px"}),pc.show(pc.getElem(".des",b)),pc.show(pc.getElem(".arrow",b))},createLevelBox:function(a){var b="";b=21==a.priority?"已达到最高级别":"距离下一级还需"+a.nextLevelScore+"贡献";var c='<div class="levelbox"><span class="mark">Lv'+a.priority+'</span><span class="txt">'+a.memberRole+'</span><div class="des"><em class="des-tit">'+a.memberRole+"</em><em>贡献"+a.score+","+b+'</em></div><i class="arrow"></i></div>',d=toolJs.domGenerator(c);return commonJs.hoverClass(d,"level-hover",!1),d}},gradeJs={run:function(){var a=[];if(pc.getElems(".floor").length>0&&pc.each(pc.getElems(".floor"),function(b){!pc.hasClass(b,"replyfloor-lock")&&b.getAttribute("data-grade")&&a.push(b.getAttribute("data-pid"))}),a.length>0){var b=pageGlobal.root+topicGlobal.gradesurl+"?tid="+pageGlobal.tid+"&pids="+a.join(",");pc.get(b,function(a){var b=toolJs.evalJson(a);pc.each(b,function(a){var b=a.pid,c=commonJs.getElemByData("floor","data-pid",b);if(c){var d=gradeJs.createGrade(a,c);pc.hasClass(c,"mainfloor")?pc.getElem(".mainfloor-bd").insertBefore(d,pc.getElem(".replyfloor-ft")):pc.hasClass(c,"replyfloor")&&pc.insertAfter(pc.getElem(".replycontent",c),d)}})})}},createGrade:function(a,b){var c=(b.getAttribute("data-pid"),!1);pc.each(a.grades,function(a){return userGlobal.loginId==a.operatorId?(c=!0,!1):void 0});var d="";if(a.hasmore)var d='<a href="javascript:;" class="btn"><span>展开全部</span><em class="triangle"></em></a>';var e='<table class="datatable" cellspacing="0"><thead><tr><th>已有'+a.gradeCount+'人评分</th><th>评分</th><th>时间</th><th>理由</th><th>&nbsp;</th></tr></thead><tbody></tbody><tfoot><tr><td class="total">&nbsp;</td><td colspan="3" class="more">'+d+'</td><td class="total">总评分：<span class="orange">'+a.gradeAmount+"分</span></td></tr></tfoot></table>",f=toolJs.domGenerator('<div class="mainfloor-score"></div>');return f.innerHTML='<div class="hd"><div class="mark">参与评分</div></div>'+e,pc.each(a.grades,function(a){pc.getElem("tbody",f).appendChild(gradeJs.createGradeItem(a))}),a.hasmore&&pc.addEvent(pc.getElem(".btn",f),"click",function(){commonJs.toggleClass(pc.getElem(".btn em",f),"triangle-up"),pc.hasClass(pc.getElem(".btn em",f),"triangle-up")?pc.getElem(".btn span",f).innerHTML="收起全部":pc.getElem(".btn span",f).innerHTML="展开全部",gradeJs.addMoreGrade(a.pid,f)}),(userroleJs.verifyRight(rightRule.global.cancelGradeAll)||userroleJs.verifyRight(rightRule.global.cancelGrade))&&pc.addEvent(b,"click",function(b){if(pc.hasClass(b.target,"cancelgrade")){var c=b.target,d=c.getAttribute("data-gid");toolJs.preventDefault(b);var e='<div class="pop-section"><div class="form-wrap"><div class="table-item"><table cellspacing="0"><thead><tr><th class="col-ipt"><input type="checkbox" data-event="checkall" id="JcancelgradeAll" /></th><th class="col-user">用户名</th><th class="col-date">评分日期</th><th class="col-count">评分数目</th><th class="col-reason">评分理由</th></tr></thead><tbody>',f=pageGlobal.root+topicGlobal.checkCancelGradeUrl+"?tid="+pageGlobal.tid+"&pid="+a.pid+"&fid="+pageGlobal.fid+"&gradeId="+d;pc.ajax({url:f,type:"GET",async:!1,dataType:"text",success:function(a){var b=toolJs.evalJson(a);0==b.status&&pc.each(b.gradeLogs,function(a){e+='<tr><td class="col-ipt"><input type="checkbox" class="chk-cancelgrade" data-event="checkthis" value="'+a.gradeId+'" /></td><td class="col-user">'+a.operatorName+'</td><td class="col-date">'+a.createAt+'</td><td class="col-count">'+a.amount+a.scoreTypeName+'</td><td class="col-reason">'+a.reason+"</td></tr>"})}}),e+='</tbody></table></div><div class="tips-error"></div></div></div><div class="reason-box"><div class="hd"><span class="mark">操作原因</span></div><div class="bd"><textarea id="JReasonArea"></textarea></div></div>';var g={"click#sendMessage":function(a,b){var c=[];if(pc.each(pc.getElems(".chk-cancelgrade"),function(a){a.checked&&c.push(a.value)}),0==c.length)return pc.getElem(".tips-error").innerHTML="请选择要撤销的评分",pc.getElem(".tips-error").style.display="block",!1;var d=pageGlobal.root+topicGlobal.cancelGradeUrl,e={pid:this.postdata.pid,fid:pageGlobal.fid,tid:pageGlobal.tid,gradeIds:c,reason:pc.getElem("#JReasonArea").value,sendmsg:pc.getElem("#sendmsg").checked};popform.postform(d,e,this)},"click#checkall":function(a,b){b.checked?pc.each(pc.getElems(".chk-cancelgrade"),function(a){a.checked=!0}):pc.each(pc.getElems(".chk-cancelgrade"),function(a){a.checked=!1})},"click#checkthis":function(a,b){var c=!0;pc.each(pc.getElems(".chk-cancelgrade"),function(a){a.checked||(c=!1)}),pc.getElem("#JcancelgradeAll").checked=c}},h={pophtml:e,popevent:g,title:"撤销评分",popclass:"pop-cancelgrade",style:{width:"500px"},postdata:{pid:a.pid}};new popform(h)}}),f},addMoreGrade:function(a,b){var c=pc.getElem(".grade-more",b);if(c)pc.each(pc.getElems("tr",c),function(a){""==a.style.display?a.style.display="none":a.style.display=""});else{var d=pageGlobal.root+topicGlobal.allgradeurl+"?tid="+pageGlobal.tid+"&pid="+a;pc.get(d,function(a){var d=toolJs.evalJson(a);c=document.createElement("tbody"),c.className="grade-more",pc.each(d,function(a,b){b>9&&c.appendChild(gradeJs.createGradeItem(a))}),pc.insertAfter(pc.getElem("tbody",b),c)})}},createGradeItem:function(a){var b=document.createElement("tr"),c=commonJs.getfaceUrl(a.operatorId),d=document.createElement("td");d.className="user orange",d.innerHTML='<img src="'+c+'" width="36" height="36" alt="" /><a href="'+pageGlobal.centerurl+a.operatorId+'" target="_blank">'+a.operatorName+"</a>",b.appendChild(d);var e=document.createElement("td");e.className="score orange",e.innerHTML=a.amount+a.scoreTypeName,b.appendChild(e);var f=document.createElement("td");f.className="date",f.innerHTML=a.createAt,b.appendChild(f);var g=document.createElement("td");g.className="txt",g.innerHTML=a.reason,b.appendChild(g);var h=document.createElement("td");return(userroleJs.verifyRight(rightRule.global.cancelGradeAll)||userroleJs.verifyRight(rightRule.global.cancelGrade)&&userGlobal.loginId==a.operatorId)&&(h.className="cancel",h.innerHTML='<a href="javascript:;" class="cancelgrade" data-gid="'+a.gradeId+'">撤销评分</a>'),b.appendChild(h),b},setGrade:function(a,b){pc.addEvent(a,"click",function(a){toolJs.preventDefault(a),curUsername?pc.ajax({url:pageGlobal.root+topicGlobal.checkgradeurl+"?tid="+pageGlobal.tid+"&fid="+pageGlobal.fid+"&pid="+b,type:"GET",async:!1,dataType:"text",success:function(a){var c=toolJs.evalJson(a);if(0==c.status){var d=c.scoreMap,e=0;if(pc.each(d,function(a){e+=a.score}),0==e)commonJs.alertMessage("当天剩余积分为0");else{var f="";pc.each(c.gradeCountList,function(a){f+='<li><a href="javascript:;" data-event="setGradeValue">'+a+"</a></li>"});var g='<div class="pop-section"><div class="form-wrap">';pc.each(d,function(a){g+='<div class="select-item"><span class="tit">'+a.scoreName+'：</span><input type="text" value="" class="ipt-setgrade" id="'+a.scoreKey+'" /><span id="'+a.scoreKey+'Select" class="mark-sub JSelect" data-event="toggleGradeSet"><i data-event="toggleGradeSet2" class="trag trag-gray-t"></i><ul data-var="'+a.scoreKey+'" class="JSelectDrop">'+f+'</ul></span><span class="tips-info">&nbsp;&nbsp;今天剩余'+a.score+"</span></div>"}),g+='<div class="tips-error"></div></div></div>${reasonbox}';var h={"click#setGradeValue":function(a,b){var c=b.parentNode.parentNode.getAttribute("data-var");pc.getElem("#"+c)&&(pc.getElem("#"+c).value=b.innerHTML),pc.removeClass(pc.getElem("#"+c+"Select"),"JSelect-hover")},"click#sendMessage":function(a,b){var c=pageGlobal.root+this.postdata.url,e={tid:pageGlobal.tid,fid:pageGlobal.fid,pids:this.postdata.pid,reason:pc.getElem("#JReasonArea").value,sendmsg:pc.getElem("#sendmsg").checked};pc.each(d,function(a){e[a.scoreKey]=pc.getElem("#"+a.scoreKey).value}),popform.postform(c,e,this)},"click#toggleGradeSet":function(a,b){commonJs.toggleClass(b,"JSelect-hover")},"click#toggleGradeSet2":function(a,b){commonJs.toggleClass(b.parentNode,"JSelect-hover")}},i={pophtml:g,popevent:h,title:"评分",postdata:{pid:b,url:rightRule.topicadmin.batchManage.batchManageSub.batchGrade.url}};new popform(i)}}else commonJs.alertMessage(c.desc)}}):commonJs.alertMessage("请先登录")})}};if(gradeJs.run(),focusJs.prototype={init:function(){var a=this,b=pageGlobal.biproot+topicGlobal.focusurl+"?act=getNum&accountIds="+this.focusid+"&"+pageGlobal.sessionname+"="+curSessionID+"&radtime="+(new Date).getTime();pc.load(b,function(b){void 0==b.code&&(pc.each(b,function(b,c){0==b.status||1==b.status?a.btnobj.setAttribute("data-action","add"):(2==b.status||3==b.status)&&(a.btnobj.innerHTML="取消关注",pc.addClass(a.btnobj,"btn-focused"),a.btnobj.setAttribute("data-action","delete")),a.fansobj.innerHTML='<a href="'+pageGlobal.centerurl+a.focusid+'/fan/" target="_blank">'+b.fsNum+"</a>"}),pc.addEvent(a.btnobj,"click",function(){curUsername?a.changeFocus():commonJs.gotoLoginPage()}))})},changeFocus:function(){var a=this,b=pageGlobal.biproot+topicGlobal.focusurl,c=this.btnobj.getAttribute("data-action"),d={friendId:this.focusid,friendName:this.focusname,name:curUsername,act:c},e={withCookie:!0};postCORS(b,function(b){var d=toolJs.evalJson(b);0==d.code?(a.changeState(c),a.changeFans(c)):commonJs.alertMessage(d.message)},d,e)},changeState:function(a){"delete"==a?(this.btnobj.innerHTML='<i class="icon"></i><em>关注</em>',pc.removeClass(this.btnobj,"btn-focused"),this.btnobj.setAttribute("data-action","add")):"add"==a&&(this.btnobj.innerHTML="取消关注",pc.addClass(this.btnobj,"btn-focused"),this.btnobj.setAttribute("data-action","delete"))},changeFans:function(a){var b=pc.getElem("a",this.fansobj);"delete"==a?b.innerHTML=parseInt(b.innerHTML)-1:"add"==a&&(b.innerHTML=parseInt(b.innerHTML)+1)}},medalJs.prototype={init:function(){var a=this,b=this.shownum,c=this.medalbox,d=25*this.medallength,e=25*(b+1);if(this.medallength>b){pc.setStyle(pc.getElem(".inner",c),"width",e+"px"),pc.setStyle(c,"width",e+"px"),this.changemedal(b,"none");var f=pc.getElem(".btn",c);f||(f=toolJs.domGenerator('<a href="javascript:;" class="btn"></a>'),pc.getElem(".inner",c).appendChild(f)),pc.removeEvent(c,"mouseover"),pc.removeEvent(c,"mouseout"),pc.addEvent(c,"mouseover",function(){pc.addClass(f,"btn-on"),pc.addClass(this,"medalbox-open"),a.changemedal(b,"block")}),pc.addEvent(c,"mouseout",function(){pc.removeClass(f,"btn-on"),pc.removeClass(this,"medalbox-open"),a.changemedal(b,"none")})}else pc.setStyle(pc.getElem(".inner",c),"width",d+"px"),pc.setStyle(c,"width",d+"px")},changemedal:function(a,b){pc.each(this.medals,function(c,d){d>=a&&(c.style.display=b)})}},pc.getElems(".floor").length>0&&pc.each(pc.getElems(".floor"),function(a){if(!pc.hasClass(a,"replyfloor-lock")){var b=a.getAttribute("data-pid"),c=a.getAttribute("data-uid"),d=pc.hasClass(a,"mainfloor");if(commonJs.hoverClass(pc.getElem(".levelbox",a),"level-hover",!1),pc.getElem(".medalbox",a)&&new medalJs(pc.getElem(".medalbox",a),3),(userGlobal.loginId==pageGlobal.uid||userroleJs.verifyRight(rightRule.topicadmin.setPostTop))&&!d){var e=toolJs.domGenerator('<a class="setposttop" href="javascript:;">置顶回复</a>');pc.prependChild(pc.getElem(".replyfloor-action",a),e),pc.addEvent(e,"click",function(){var a=pageGlobal.root+topicGlobal.checkPostTopUrl+"?tid="+pageGlobal.tid+"&fid="+pageGlobal.fid+"&pid="+b;pc.get(a,function(a){var c=toolJs.evalJson(a);if(-1==c.status)commonJs.alertMessage(c.desc);else{var d=function(){var a=pageGlobal.root+topicGlobal.setPostTopUrl+"?tid="+pageGlobal.tid+"&fid="+pageGlobal.fid+"&pid="+b;pc.post(a,function(a){var b=toolJs.evalJson(a);commonJs.alertMessage(b.desc,"refresh")})};commonJs.confirmMessage("将此回帖置顶为精彩回复，每帖最多可置顶5个",d)}})})}if(userroleJs.verifyRight(rightRule.global.modifyAll)||userroleJs.verifyRight(rightRule.global.modify)&&userGlobal.loginId==c){var f="";d?f=topicGlobal.isHTML?pageGlobal.root+"html.do?action=edit&fid="+pageGlobal.fid+"&tid="+pageGlobal.tid+"&pid="+b:pageGlobal.root+pageGlobal.postUrl+"?action=edit&fid="+pageGlobal.fid+"&tid="+pageGlobal.tid+"&pid="+b:pc.hasClass(a,"replyfloor")&&(f=pageGlobal.root+topicGlobal.advanceposturl+"?action=edit&fid="+pageGlobal.fid+"&tid="+pageGlobal.tid+"&pid="+b);var g=toolJs.domGenerator('<a href="'+f+'">修改</a>');if(pc.getElem(".replyfloor-action",a).appendChild(g),d){var h=toolJs.domGenerator('<span><a href="'+f+'">修改</a></span>');pc.getElem(".subinfo",a).appendChild(h)}}if(d&&userGlobal.loginId==pageGlobal.uid){var i="接收回复通知";a.getAttribute("data-msg")?i="取消回复通知":a.setAttribute("data-msg","0");var j=pageGlobal.root+topicGlobal.changeSendMsgUrl,k=toolJs.domGenerator('<a href="javascript:;">'+i+"</a>");pc.getElem(".subinfo",a).appendChild(k),pc.addEvent(k,"click",function(){var b="1"==a.getAttribute("data-msg")?!1:!0;pc.post(j,{tid:pageGlobal.tid,sendMsg:b},function(c){var d=toolJs.evalJson(c);0==d.status?b?(k.innerHTML="取消回复通知",a.setAttribute("data-msg","1")):(k.innerHTML="接收回复通知",a.setAttribute("data-msg","0")):commonJs.alertMessage(d.desc)})})}if(userGlobal.loginId==c&&void 0==userGlobal.trade&&0==topicGlobal.isBuild){var l=toolJs.domGenerator('<a href="javascript:;">删除</a>');pc.getElem(".replyfloor-action",a).appendChild(l);var m=function(){if(d)var a=pageGlobal.root+"action/topic/delete.do";else var a=pageGlobal.root+"action/post/delete.do";var c={pid:b,tid:pageGlobal.tid};pc.post(a,c,function(a){var b=toolJs.evalJson(a);if(0==b.status)if(d){var c=pageGlobal.root+pageGlobal.directory+"/f"+pageGlobal.fid+".html";commonJs.alertMessage("删除成功","redirect",c)}else commonJs.alertMessage("删除成功","refresh");else commonJs.alertMessage(b.desc)})};pc.addEvent(l,"click",function(){commonJs.confirmMessage("删除自己的帖子会扣分,确定要删除此帖吗？",m)})}if(curUsername&&userGlobal.loginId!=c){var n=toolJs.domGenerator('<a href="javascript:;" class="scorebtn">评分</a>');pc.getElem(".replyfloor-action",a).appendChild(n),
gradeJs.setGrade(n,b)}if(userroleJs.verifyRight(rightRule.global.report)&&userGlobal.loginId!=c){var o=toolJs.domGenerator('<a href="'+pageGlobal.root+rightRule.global.report.url+'">举报</a>');pc.getElem(".replyfloor-action",a).appendChild(o),pc.addEvent(o,"click",function(c){if(toolJs.preventDefault(c),a.getAttribute("data-report"))commonJs.alertMessage("该贴已经被举报，正在审核");else{var d='<div class="pop-section"><div class="tips-info">举报: pid: '+b+'</div><div class="form-wrap"><div class="tips-error"></div></div></div>${reasonbox}',e={"click#sendMessage":function(a,b){var c=this.postdata.url,d={tid:pageGlobal.tid,pid:this.postdata.pid,reason:pc.getElem("#JReasonArea").value};popform.postform(c,d,this)}},f={pophtml:d,popevent:e,noauthor:!0,title:"举报",postdata:{pid:b,url:o.getAttribute("href")}};new popform(f)}})}if(topicGlobal.showPostDanger&&d&&userroleJs.verifyRight(rightRule.topicadmin.setDanger)){var p="",q="",r="";a.getAttribute("data-danger")?(p="cancel",r="取消危险",q="将此主题取消危险"):(p="set",r="设为危险",q="将此主题设为危险");var s=toolJs.domGenerator('<a href="'+pageGlobal.root+rightRule.topicadmin.setDanger.url+'">'+r+"</a>");pc.getElem(".replyfloor-action",a).appendChild(s),pc.addEvent(s,"click",function(a){toolJs.preventDefault(a);var c=this,d=function(){var a=c.getAttribute("href")+"?tid="+pageGlobal.tid+"&pid="+b+"&action="+p;pc.post(a,function(a){var b=toolJs.evalJson(a);commonJs.alertMessage(b.desc,"refresh")})};commonJs.confirmMessage(q,d)})}var t=pc.getElem(".Jroleicon",a);roledata={};var u=null;t&&(pc.addEvent(t,"mouseover",function(){clearTimeout(u),u=setTimeout(function(){if(pc.getElem(".des",t))pc.show(pc.getElem(".des",t)),pc.show(pc.getElem(".arrow",t));else if(roledata[c])floorJs.showRoleDesc(roledata[c],t);else{var a=pageGlobal.root+topicGlobal.userRoleUrl+"?uid="+c;pc.get(a,function(a){var b=toolJs.evalJson(a);roledata[b.uid]=b.detail,floorJs.showRoleDesc(b.detail,t)})}},300)}),pc.addEvent(t,"mouseout",function(){clearTimeout(u),u=setTimeout(function(){pc.getElem(".des",t)&&(pc.hide(pc.getElem(".des",t)),pc.hide(pc.getElem(".arrow",t)))},300)}));var v=pc.getElem(".facewrap",a);if(pc.hasClass(a,"mainfloor"))var v=pc.getElem(".mainfloor-user",a);var w=null;pc.addEvent(v,"mouseover",function(){clearTimeout(w),w=setTimeout(function(){if(pc.getElem(".userboard",v))pc.show(pc.getElem(".userboard",v));else{var a="";userGlobal.loginId!=c&&(a='<div class="userboard-ft"><a href="javascript:;" class="btn btn-focus"><i class="icon png24"></i><em>关注</em></a><a href="javascript:;" class="btn btn-message"><i class="icon png24"></i><em>私信</em></a></div>');var b='<div class="userboard"><i class="arrow"></i><div class="userboard-bd"><div class="userboard-cont cf"><a href="" target="_blank" class="face"><img src="" width="50" height="50" alt="" /></a><div class="count"><div class="name"><a class="orange" href="" target="_blank"></a></div><ul class="cf"><li class="first"><span class="num num-topic"></span><span>主题</span></li><li><span class="num num-reply"></span><span>回帖</span></li><li><span class="num num-pick"></span><span>精华</span></li><li class="last"><span class="num num-fans"></span><span>粉丝</span></li></ul></div></div><div class="userboard-info"><span class="level"></span><span class="date"></span></div></div>'+a+"</div>",d=toolJs.domGenerator(b);v.appendChild(d);var e=pageGlobal.root+topicGlobal.userdetailurl+"?uid="+c;pc.get(e,function(b){var e=toolJs.evalJson(b);if(pc.getElem(".face",d).href=pageGlobal.centerurl+e.uid,pc.getElem(".face img",d).src=e.imgUrl,pc.getElem(".name a",d).href=pageGlobal.centerurl+e.uid,pc.getElem(".name a",d).innerHTML=e.nickname,pc.getElem(".num-topic",d).innerHTML='<a href="'+pageGlobal.centerurl+c+'/topic/" target="_blank">'+e.topicCount+"</a>",pc.getElem(".num-reply",d).innerHTML='<a href="'+pageGlobal.centerurl+c+'/reply/" target="_blank">'+e.postCount+"</a>",pc.getElem(".num-pick",d).innerHTML='<a href="'+pageGlobal.centerurl+c+'/pick/" target="_blank">'+e.pickCount+"</a>",pc.getElem(".date",d).innerHTML="注册时间 ："+e.createat,pc.getElem(".level",d).innerHTML="ID : "+e.username,userGlobal.loginId==c){var f=pageGlobal.biproot+topicGlobal.focusurl+"?act=getNum&accountIds="+e.uid+"&"+pageGlobal.sessionname+"="+curSessionID+"&rtime="+(new Date).getTime();pc.load(f,function(a){void 0==a.code&&pc.each(a,function(a,b){pc.getElem(".num-fans",d).innerHTML='<a href="'+pageGlobal.centerurl+e.uid+'/fan/" target="_blank">'+a.fsNum+"</a>"})})}if(""!=a){new focusJs(pc.getElem(".btn-focus",d),e.uid,e.username,pc.getElem(".num-fans",d));var g=pc.getElem(".btn-message",d);pc.addEvent(g,"click",function(){if(curUsername){pc.hide(d);var a='<div class="pop-section"><div class="tips-info">发送给：【'+e.nickname+'】</div><div class="form-wrap"><div class="textarea-box"><div class="box-hd"><span class="mark">内容</span><span class="mark-sub"><em id="Jtxtcount">0</em>/250</span></div><div class="box-bd"><textarea id="msgContent" class="textarea" name="content" data-verify="required,znmax_250" data-event="countFont"></textarea></div></div><div class="tips-error"></div></div></div><div class="pop-footer cf"><span class="captch">验证码：<input type="text" name="captcha" id="msgCaptcha" class="ipt-captch" data-verify="required" /><img src="http://captcha.pconline.com.cn/captcha/v.jpg" width="70" class="img-captcha" id="imgCaptcha" /><a href="javascript:;" class="btn-captcha" data-event="changeCaptcha">换一张</a></span><a href="javascript:;" data-event="sendMessage" class="pop-submit">确定</a></div>',b={"click#changeCaptcha":function(a,b){pc.getElem("#imgCaptcha").src=commonVar.captchaSrc+"?"+(new Date).getTime()},"keyup#countFont":function(a,b){var c=toolJs.getTextCount(pc.getElem("#msgContent").value);pc.getElem("#Jtxtcount").innerHTML=c,c>250&&pc.addClass(pc.getElem("#Jtxtcount"),"red")},"click#sendMessage":function(a,b){var c=this,d=pc.getElem(".messageBox"),e={captcha:{required:"验证码不能为空"},content:{required:"内容不能为空",znmax:"输入内容超出长度"}},f=verifyJs.verifyForm(d,e);if(f)return pc.getElem(".tips-error").innerHTML=f,pc.getElem(".tips-error").style.display="block",!0;pc.getElem(".tips-error").innerHTML="",pc.getElem(".tips-error").style.display="none";var g=pageGlobal.biproot+topicGlobal.messageurl+"?act=create&senderId="+userGlobal.loginId+"&accountId="+this.postdata.touid,h={content:pc.getElem("#msgContent").value,captcha:pc.getElem("#msgCaptcha").value},i={withCookie:!0,charset:"req_enc=utf-8"};postCORS(g,function(a){var b=toolJs.evalJson(a);0==b.code?(c.remove(),commonJs.alertMessage("发送成功")):(pc.getElem(".tips-error").innerHTML=b.message,pc.getElem(".tips-error").style.display="block")},h,i)}},c={pophtml:a,popevent:b,title:"发送私信",nofooter:!0,popclass:"messageBox",postdata:{touid:e.uid}};new popform(c)}else commonJs.gotoLoginPage()})}pc.show(d)})}},300)}),pc.addEvent(v,"mouseout",function(){clearTimeout(w),w=setTimeout(function(){pc.getElem(".userboard",v)&&pc.hide(pc.getElem(".userboard",v))},300)})}}),pc.getElems(".floor").length>0){var onlineuids=[];if(pc.each(pc.getElems(".floor"),function(a){pc.hasClass(a,"replyfloor-lock")||onlineuids.push(a.getAttribute("data-uid"))}),onlineuids=toolJs.uniquearray(onlineuids),onlineuids.length>0){var onlineintf=pageGlobal.root+topicGlobal.onlineStateUrl+"?uids="+onlineuids.join(",");pc.get(onlineintf,function(a){var b=toolJs.evalJson(a);pc.each(b,function(a){if(1==a.online){var b=commonJs.getElemsByData("floor","data-uid",a.uid);b.length>0&&pc.each(b,function(a){pc.addClass(pc.getElem(".username",a),"online")})}})})}}!function(){if((2312487==pageGlobal.fid||2312687==pageGlobal.fid||2312737==pageGlobal.fid)&&pc.getElems(".floor").length>0){var a=[];if(pc.each(pc.getElems(".floor"),function(b){pc.hasClass(b,"replyfloor-lock")||a.push(b.getAttribute("data-uid"))}),a=toolJs.uniquearray(a),a.length>0){for(var b="http://play10.pconline.com.cn/online140813/action/medal/batchMedal.jsp?",c=0;c<a.length;c++)b+="userIds="+a[c],c!=a.length-1&&(b+="&");b+="&radtime="+(new Date).getTime(),pc.load(b,function(a){1==a.code&&pc.each(a.users,function(a){if(1==a.isGet){var b=commonJs.getElemsByData("floor","data-uid",a.userId);pc.each(b,function(a){if(pc.getElem(".medalbox",a)){var b=toolJs.domGenerator('<img src="http://img.pconline.com.cn/images/upload/upc/tx/itbbs/1408/20/c17/37661418_1408527524333.png" width="20" height="20" alt="三星乐园" title="三星乐园" />');pc.prependChild(pc.getElem(".medalbox .inner",a),b),new medalJs(pc.getElem(".medalbox",a),5)}else{var c=floorJs.createMedalBox([{image:"http://img.pconline.com.cn/images/upload/upc/tx/itbbs/1408/20/c17/37661418_1408527524333.png",name:"三星乐园"}],5);pc.getElem(".replyfloor-info",a).insertBefore(c,pc.getElem(".floorname",a))}})}})})}}}(),pc.getElems(".applink").length>0&&pc.each(pc.getElems(".applink"),function(a){var b=null;pc.addEvent(a,"mouseover",function(){clearTimeout(b),b=setTimeout(function(){pc.addClass(a,"applink-hover")},200)}),pc.addEvent(a,"mouseout",function(){clearTimeout(b),b=setTimeout(function(){pc.removeClass(a,"applink-hover")},200)})}),ZeroClipboard.config({moviePath:commonVar.zeroClipboardSwf,forceHandCursor:!0});var copyClient=new ZeroClipboard(pc.getElems(".floorname"));if(copyClient.on("datarequested",function(a){var b;pc.each(pc.parentElems(this),function(a){return pc.hasClass(a,"floor")?(b=a,!1):void 0});var c=pageGlobal.root+pageGlobal.tid+"_"+pageGlobal.pageno+".html#post_"+b.getAttribute("data-pid");a.setText(c)}),copyClient.on("complete",function(a,b){commonJs.tipMessage("帖子链接已复制")}),pc.browser.ie6&&window.clipboardData&&pc.each(pc.getElems(".floorname"),function(a){var b;pc.each(pc.parentElems(a),function(a){return pc.hasClass(a,"floor")?(b=a,!1):void 0});var c=pageGlobal.root+pageGlobal.tid+"_"+pageGlobal.pageno+".html#post_"+b.getAttribute("data-pid");pc.addEvent(a,"click",function(){var a=window.clipboardData.setData("Text",c);a&&commonJs.tipMessage("帖子链接已复制")})}),lazycreate("Jmainfloor",790),lazycreate("Jfloorlist",705),userGlobal.loginId==pageGlobal.uid||userroleJs.verifyRight(rightRule.topicadmin.setPostTop)){var showPostTopTip=new poptip(pc.getElem(".doc"),"可以将回帖置顶为精彩回复在正文下方特别显示哦，点这里试试吧！",{cookieName:"posttoptip_flag",className:"posttoptip"},!0),PostTopTip=pc.getElem(".posttoptip");if(PostTopTip){var PostTopTipTime=null;pc.each(pc.getElems(".replyfloor"),function(a){pc.hasClass(a,"replyfloor-lock")||pc.addEvent(a,"mouseover",function(){if(!pc.getCookie("posttoptip_flag")){var b=pc.getElem(".setposttop",a);b&&(clearTimeout(PostTopTipTime),PostTopTipTime=setTimeout(function(){showPostTopTip.setPosition(b,20,-85),pc.show(PostTopTip)},300))}})}),pc.addEvent(pc.getElem(".block-topic"),"mouseout",function(){clearTimeout(PostTopTipTime),PostTopTipTime=setTimeout(function(){pc.hide(PostTopTip)},300)}),pc.addEvent(PostTopTip,"mouseover",function(){clearTimeout(PostTopTipTime),pc.show(this)})}}var replyJs={sendreply:function(a,b,c){pc.ajax({url:pageGlobal.root+topicGlobal.replyurl,type:"POST",data:a,success:function(a){var d=toolJs.evalJson(a);if(0==d.status){userGlobal.needCaptcha=d.needCaptcha;var e=document.createElement("div");e.className="replyfloor cf",e.setAttribute("data-pid",d.pid),e.setAttribute("data-uid",d.uid),0==d.pid&&commonJs.tipMessage("系统已接收你的帖子，现进行处理，请耐心等待");var f="",g="";0!=d.pid&&(f='<div class="floorname">'+d.floor+"楼</div>",g='<span class="date">'+d.datetime+"</span>");var h=pageGlobal.root+pageGlobal.directory+"/topic_"+d.uid+"-"+pageGlobal.tid+".html";e.innerHTML='<div class="replyfloor-user"><div class="facewrap"><a class="userface" href="'+d.userUrl+'" target="_blank" class="face"><img src="'+d.userFaceUrl+'" width="70" height="70" alt="" /></a></div></div><div class="replyfloor-cont"><div class="replyfloor-info cf"><a class="username online" href="'+d.userUrl+'" target="_blank">'+d.nickname+"</a>"+f+'</div><div class="replycontent">'+d.message+'</div><div class="replyfloor-ft cf"><div class="subinfo">'+g+'<span class="userlink"><a href="'+h+'" target="_blank">只看该作者</a></span></div><div class="replyfloor-action"><a href=javascript:;" class="replyfresh">刷新</a></div></div></div>',pc.addEvent(pc.getElem(".replyfresh",e),"click",function(){window.location.replace(0==d.pid?pageGlobal.root+pageGlobal.tid+"_"+d.lastPageNo+".html":pageGlobal.root+pageGlobal.tid+"_"+d.lastPageNo+".html?r="+d.pid%10+"#post_"+d.pid)});var i=pc.getElem(".LazyloadImg",e);if(i){var j=i.getAttribute("src2"),k=new Image;k.onload=function(){k.width>700&&(i.style.width="700px"),i.setAttribute("src",j),i.removeAttribute("src2")},k.src=j}if(0!=d.pid){var l=new ZeroClipboard(pc.getElem(".floorname",e));if(l.on("datarequested",function(a){var b=pageGlobal.root+pageGlobal.tid+"_"+d.lastPageNo+".html#post_"+d.pid;a.setText(b)}),l.on("complete",function(a,b){commonJs.tipMessage("帖子链接已复制")}),pc.browser.ie6&&window.clipboardData){var m=pageGlobal.root+pageGlobal.tid+"_"+d.lastPageNo+".html#post_"+d.pid;pc.addEvent(pc.getElem(".floorname",e),"click",function(){var a=window.clipboardData.setData("Text",m);a&&commonJs.tipMessage("帖子链接已复制")})}}"function"==typeof b&&b(e)}else commonJs.alertMessage(d.desc),c&&"function"==typeof c&&c()}})},toggleform:function(a){var b=pc.getElem(".captchabox",a);if(userGlobal.needCaptcha)if(b)b.style.display="block",pc.getElem(".JreplycaptchaImg",a).src=commonVar.captchaSrc+"?"+(new Date).getTime(),pc.getElem(".Jreplycaptcha",a).value="";else{var c='<div class="captchabox">验证码：<input class="ipt ipt-captcha Jreplycaptcha" type="text" /><img src="" class="JreplycaptchaImg" /><a href="javascript:;" class="Jreplycaptchabtn">看不清？换一张</a></div>';pc.insertAfter(pc.getElem(".editorbtn-img",a),toolJs.domGenerator(c)),pc.getElem(".JreplycaptchaImg",a).src=commonVar.captchaSrc+"?"+(new Date).getTime(),pc(".Jreplycaptchabtn",a).addEvent("click",function(){pc.getElem(".JreplycaptchaImg",a).src=commonVar.captchaSrc+"?"+(new Date).getTime()})}else b&&(b.style.display="none");b&&(pc.getElem(".Jreplycaptcha",a).value=""),pc.getElem(".textarea",a).value="","none"==a.style.display?pc.slideDown(a,200):"block"==a.style.display&&pc.slideUp(a,200)},togglebtn:function(a,b){"sending"==b&&(pc.addClass(a,"editorbtn-sending"),pc.setText(a,commonVar.sendingTxt)),"send"==b&&(pc.removeClass(a,"editorbtn-sending"),pc.setText(a,commonVar.sendTxt))},scrollFloor:function(a){setTimeout(function(){pc.animate(pc.getElem("body"),{scrollTop:toolJs.getOffset(a).top},600)},500)},insertEmCode:function(a,b,c){a.focus(),pc.isUndefined(c)&&(c="");var d=(b.length,c.length);if(pc.isUndefined(a.selectionStart))if(document.selection&&document.selection.createRange){var e=document.selection.createRange();""!=c&&(b=b+e.text+c),e.text=b.replace(/\r?\n/g,"\r\n"),e.moveStart("character",-d),e.moveEnd("character",-d),e.select()}else a.value+=b;else{var f=a.selectionStart+0;""!=c&&(b=b+a.value.substring(a.selectionStart,a.selectionEnd)+c),a.value=a.value.substr(0,a.selectionStart)+b+a.value.substr(a.selectionEnd),a.selectionStart=f+b.length-d,a.selectionEnd=f+b.length-d}},convertEmCode:function(a){for(var b=0;b<emoLib.length;b++){var c=new Array;if(c=emoLib[b],"undefined"!=typeof c&&-1!==a.indexOf(c[1])){var d=new RegExp("\\["+c[1]+"{1,10}\\]","gi");a=a.replace(d,"["+c[0]+"]")}}return a}};if(curUsername){var checkCaptcha=function(){var a=pc.getElem("#JmainCaptcha");if(userGlobal.needCaptcha)if(a)a.style.display="block",pc.getElem("#fast_post_captcha").value="",pc.getElem("#JcaptchaImg").src=commonVar.captchaSrc+"?"+(new Date).getTime();else{var b='<div class="captchabox" id="JmainCaptcha">验证码：<input name="fast_post_captcha" id="fast_post_captcha" class="ipt ipt-captcha" type="text" /><img src="" id="JcaptchaImg" /><a href="javascript:;" id="Jcaptchabtn">看不清？换一张</a></div>';a=toolJs.domGenerator(b),pc.insertAfter(pc.getElem("#Jreplytopic"),a),pc.getElem("#JcaptchaImg").src=commonVar.captchaSrc+"?"+(new Date).getTime(),pc("#Jcaptchabtn").addEvent("click",function(){pc.getElem("#JcaptchaImg").src=commonVar.captchaSrc+"?"+(new Date).getTime()})}else a&&(a.style.display="none")};checkCaptcha();var editorid="f",editorcurrentheight=110,editorminheight=110,editormaxheight=110;pc.getScript(commonVar.ubbSrc,function(){emoLib=smilies_array[1][1],emoSrc=smiliesUrlRoot,ubb.editor.newEditor(1,ubb.bbcode.bbcode2html(textobj.value)),ubb.editor.setCaretAtEnd();var a=pc("#"+editorid+"_iframe").contentWindow.document.body;pc.addEvent(a,"keydown",function(a){(a.ctrlKey&&13==a.keyCode||10==a.keyCode)&&pc("#Jreplytopic").click()})}),pc("#Jadvancepost").addEvent("click",function(a){toolJs.preventDefault(a);var b=ubb.editor.getEditorData();upload_Img[pageGlobal.pid]&&(b+="[img]"+upload_Img[pageGlobal.pid]+"[/img]"),pc.setCookie("adMessage",b,1,"","/");var c=pageGlobal.root+topicGlobal.advanceposturl+"?fid="+pageGlobal.fid+"&tid="+pageGlobal.tid+"&action=reply&advance=true";window.location.href=c});var replyimgbtn=pc.getElem("#JubbUpload");replyimgbtn&&createSWF({id:"JubbUpload",width:18,height:18,targetId:"ubbUploadWrap",postId:pageGlobal.pid});var replytopcicbtn=pc.getElem("#Jreplytopic");pc.addEvent(replytopcicbtn,"click",function(){if(!pc.hasClass(replytopcicbtn,"editorbtn-sending")){ubb.editor.getEditorData();var a=pc.getElem("#f_textarea").value;if(""==pc.trim(a))return commonJs.alertMessage("内容不能为空"),!1;if(userGlobal.needCaptcha&&pc.getElem("#fast_post_captcha")&&""==pc.trim(pc.getElem("#fast_post_captcha").value))return commonJs.alertMessage("验证码不能为空"),!1;if(a.indexOf("[img]data:image")>-1)return commonJs.alertMessage("您所发表的内容中含有非法图片链接【如截图等】，请检查处理后再提交！！"),!1;replyJs.togglebtn(replytopcicbtn,"sending");var b={fid:pageGlobal.fid,tid:pageGlobal.tid,message:encodeURIComponent(a),sendMsg:!0,quoteSendMsg:!0,feedbackPost:!0};userGlobal.needCaptcha&&pc.getElem("#fast_post_captcha")&&(b.captcha=pc.trim(pc.getElem("#fast_post_captcha").value)),upload_Img[pageGlobal.pid]&&(b.replyImg=upload_Img[pageGlobal.pid]);var c=function(a){editdoc.body.innerHTML="",replyJs.togglebtn(replytopcicbtn,"send"),pc.getElem("#Jfloorlist").appendChild(a),pc.getElem("#Jreplycount")&&(pc.getElem("#Jreplycount").innerHTML=parseInt(pc.getElem("#Jreplycount").innerHTML)+1),replyJs.scrollFloor(a),pc.getElem("#ubbUploadWrap")&&pc.hide(pc.getElem("#ubbUploadWrap")),upload_Img[pageGlobal.pid]=null,checkCaptcha()},d=function(){replyJs.togglebtn(replytopcicbtn,"send")};replyJs.sendreply(b,c,d)}})}else{var unloginboard=pc.getElem(".unloginboard");pc.show(unloginboard),commonJs.setloginlink(unloginboard)}pc.getElems(".floor").length>0&&pc(".floor").each(function(a){var b=a,c=b.getAttribute("data-pid"),d=pc.getElem(".replyfloor-form",a);pc.addEvent(a,"click",function(b){if(pc(b.target).hasClass("replybtn")){var e=b.target;if(curUsername)if(commonJs.toggleClass(e,"replybtn-open"),d)replyJs.toggleform(d);else{var f=pc.getElem(".username",a).innerHTML,g=pc.getElem(".date",a).innerHTML,h=pc.getElem(".floorname",a).innerHTML,i='<div class="replyfloor-form"><div class="hd gray-1">引用 <span class="username">'+f+'</span> <span class="date">'+g+'</span> 发表于 <span class="floor">'+h+'</span> 的内容：</div><div class="bd"><textarea class="textarea"></textarea></div><div class="ft"><span class="editorbtn editorbtn-img" title="上传图片"><span id="swf'+c+'"></span><div class="popupimgbox" id="swfwrap'+c+'"></div></span><a href="javascript:;" class="editorbtn editorbtn-emo" title="插入表情"></a><a href="javascript:;" class="advancepost orange">高级模式</a><a href="javascript:;" class="editorbtn-post" title="发表">发表</a></div></div>',j=toolJs.domGenerator(i);j.style.display="none",pc.insertAfter(pc.getElem(".replyfloor-ft",a),j),d=j,replyJs.toggleform(j),pc.addEvent(pc.getElem(".advancepost",j),"click",function(a){toolJs.preventDefault(a);var b=pc.getElem(".textarea",j).value;b=replyJs.convertEmCode(b),upload_Img[c]&&(b+="[img]"+upload_Img[c]+"[/img]"),pc.setCookie("origContent",b,1,"","/");var d=pageGlobal.root+topicGlobal.advanceposturl+"?fid="+pageGlobal.fid+"&tid="+pageGlobal.tid+"&qid="+c+"&action=reply&gotoAdvance=true";window.location.href=d}),createSWF({id:"swf"+c,width:18,height:18,targetId:"swfwrap"+c,postId:c});var k=pc.getElem(".editorbtn-emo",j),l='<div class="popupembox"><div class="popupembox-hd"><span class="mark">默认表情</span></div><div class="popupembox-bd"><div class="popupembox-list">';pc.each(emoLib,function(a){l+='<img width="40" height="40" alt="'+a[1]+'" title="'+a[1]+'" src="'+emoSrc+a[0]+'.gif" />'}),l+="</div></div></div>";var m=toolJs.domGenerator(l);pc.each(pc.getElems("img",m),function(a){pc.addEvent(a,"click",function(){var b=a.getAttribute("title");replyJs.insertEmCode(pc.getElem("textarea",j),b)})}),k.appendChild(m),commonJs.triggleDisplay(k,m,!0);var n=pc.getElem(".editorbtn-post",j);pc.addEvent(n,"click",function(){var b=pc.getElem(".textarea",j).value;if(""==pc.trim(b))return void commonJs.alertMessage("内容不能为空");if(userGlobal.needCaptcha&&pc.getElem(".Jreplycaptcha",j)&&""==pc.trim(pc.getElem(".Jreplycaptcha",j).value))return commonJs.alertMessage("验证码不能为空"),!1;b=replyJs.convertEmCode(b),replyJs.togglebtn(n,"sending");var d={replyToId:c,fid:pageGlobal.fid,tid:pageGlobal.tid,message:encodeURIComponent(b),sendMsg:!0,quoteSendMsg:!0,feedbackPost:!0};userGlobal.needCaptcha&&pc.getElem(".Jreplycaptcha",j)&&(d.captcha=pc.trim(pc.getElem(".Jreplycaptcha",j).value)),upload_Img[c]&&(d.replyImg=upload_Img[c]);var f=function(b){pc.getElem(".textarea",j).setAttribute("value",""),pc.hide(j),commonJs.toggleClass(e,"replybtn-open"),replyJs.togglebtn(n,"send"),pc.insertAfter(a,b),replyJs.scrollFloor(b),pc.getElem("#swfwrap"+c)&&pc.hide(pc.getElem("#swfwrap"+c)),upload_Img[c]=null,checkCaptcha()},g=function(){replyJs.togglebtn(n,"send")};replyJs.sendreply(d,f,g)});var o=pc.getElem(".textarea",j);pc.addEvent(o,"keydown",function(a){(a.ctrlKey&&13==a.keyCode||10==a.keyCode)&&n.click()})}else commonJs.gotoLoginPage()}})});var postBtnHtml="",postBtnRight=rightRule.postbtn;if(pc.each(postBtnRight,function(a,b){if(userroleJs.verifyRight(a)){var c="",d="";"postPk"==b&&(d='<em class="hot"></em>'),c="postHtml"==b?pageGlobal.root+a.url+"?fid="+pageGlobal.fid:pageGlobal.root+pageGlobal.postUrl+"?fid="+pageGlobal.fid+"&"+a.url,"postNormal"==b?pageGlobal.isES&&userroleJs.verifyRight(rightRule.global.frontAdmin)&&(postBtnHtml+='<li><a href="'+c+'">'+a.text+"</a></li>"):pageGlobal.isES?userroleJs.verifyRight(rightRule.global.frontAdmin)&&(postBtnHtml+='<li><a href="'+c+'">'+a.text+"</a>"+d+"</li>"):postBtnHtml+='<li><a href="'+c+'">'+a.text+"</a>"+d+"</li>"}}),""!=postBtnHtml&&pc.each(pc.getElems(".JBtnPost"),function(a){pc.getElem(".btn-post-top",a).innerHTML+='<i class="trag trag-white-t"></i>',pc.getElem(".btn-post-sub",a).innerHTML+=postBtnHtml,commonJs.hoverClass(a,"btn-post-hover")}),pc.getElem("#JSideSlide")&&(new pc.tab.scroll({target:pc.getElems("#JSideSlide .slide li"),control:!1,autoPlay:!0,prevBtn:pc.getElem("#JSideSlide .prev"),nextBtn:pc.getElem("#JSideSlide .next"),type:"click",stay:3500}),commonJs.hoverClass(pc.getElem("#JSideSlide"),"slide-side-pic-hover",!1)),pc.getElem("#JTabBlocks")&&new pc.tab({target:pc.getElems("#JTabBlocks .contentdiv"),control:pc.getElems("#JTabBlocks .toc")}),curUsername){pc(".topictools .toolbtn").each(function(a){if(!a.hasClass("toolbtn-share")){var b=a.className;b=b.replace(/toolbtn-([^\s]+)/,"toolbtn-$1-active"),a.className=b+" toolbtn-active"}});var toolGradeBtn=pc.getElem("#JtoolbtnGrade");userGlobal.loginId==pageGlobal.uid?toolGradeBtn.className="toolbtn toolbtn-score":gradeJs.setGrade(toolGradeBtn,pageGlobal.pid)}commonJs.triggleDisplay(pc.getElem(".sharewrap"),pc.getElem(".bdsharebox"),!0),!pc.browser.ie6&&window.screen.width>1024&&pc.addEvent(window,"load",function(){var a=pc.getElem(".fixblock"),b=pc.getElem(".fixcms"),c=parseInt(pc.getStyle(pc.getElem(".fixblockwrap"),"height")),d=toolJs.getOffset(a).top,e=b?toolJs.getOffset(b).top:0,f=(b?parseInt(pc.getStyle(b,"height")):0,!0);pc.addEvent(window,"scroll",function(){var g=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;g>d?pc.addClass(a,"fixblock-fix"):pc.removeClass(a,"fixblock-fix"),b&&(g>e+10-c?pc.hasClass(b,"fixcms-fix")||(pc.addClass(b,"fixcms-fix"),pc.animate(b,{top:126},600,"cubicOut")):(pc.removeClass(b,"fixcms-fix"),pc.setStyle(b,"top","0"),pc.hasClass(b,"fixcms-fix")&&f))})}),pc.get(pageGlobal.root+topicGlobal.usertopicurl+"?uid="+pageGlobal.uid,function(a){var b=toolJs.evalJson(a),c="";b.length>0&&(pc.each(b,function(a){c+='<li class="png24 toe"><a target="_blank" href="'+a.topicUrl+'" title="'+a.title+'">'+a.title+"</a></li>"}),pc.getElem("#Jusertopic").innerHTML=c)}),userroleJs.verifyRight(rightRule.global.isAdmin)&&(pc.getScript("http://www1.pconline.com.cn/itbbs/2012/js/js/WdatePicker.js"),pc.getScript(commonVar.adminSrc,function(){var a=rightRule.topicadmin.topicManage,b=0;if(userroleJs.verifyRight(a)){var c='<div class="block block-admin"><div class="box-hd"><span class="mark"><i class="icon icon-admin png24"></i>系统管理</span></div><div class="box-bd"><div class="list-admin"><div class="item">';if(pc.each(a.topicManageSub,function(a,d){userroleJs.verifyRight(a)&&(b+=1,c+='<a class="rolelink" href="'+pageGlobal.root+a.url+'" data-role="'+d+'">'+a.text+"</a>")}),c+="</div></div></div></div>",b>0){var d=toolJs.domGenerator(c),e=pc.getElem(".area-main .col-a");e.insertBefore(d,e.firstChild),pc.each(pc.getElems(".rolelink",d),function(a){var b={tid:pageGlobal.tid,title:a.innerHTML,url:a.getAttribute("href")};if("settingCMS"==a.getAttribute("data-role")){var c=a.getAttribute("href")+"?tid="+pageGlobal.tid;b.redirect=c}"userRecommend"==a.getAttribute("data-role")&&(b.callfunc=function(){var a=pageGlobal.root+adminCommon.intfUrl.userRecommend+"?tid="+pageGlobal.tid+"&fid="+pageGlobal.fid;pc.post(a,function(a){var b=toolJs.evalJson(a);commonJs.alertMessage(0==b.status?"推荐成功":b.desc)})}),"oneKeyDeleteTopic"==a.getAttribute("data-role")&&(b.callfunc=function(){var a=pageGlobal.root+adminCommon.intfUrl.oneKeyDeleteTopic+"?tid="+pageGlobal.tid+"&fid="+pageGlobal.fid+"&action=oneKeyDeleteTopic";pc.post(a,function(a){var b=toolJs.evalJson(a);if(0==b.status){var c=pageGlobal.root+pageGlobal.directory+"/f"+pageGlobal.fid+".html";commonJs.alertMessage("删除成功","redirect",c)}else commonJs.alertMessage(b.desc)})}),"build"==a.getAttribute("data-role")&&(b.noreason=!0),new adminJs(a,b)})}}if(pc.getElems(".floor").length>0){var f=rightRule.topicadmin.userManage,g="";userroleJs.verifyRight(f)&&pc.each(f.userManageSub,function(a,b){userroleJs.verifyRight(a)&&(g+='<a href="'+pageGlobal.root+a.url+'" data-role="'+b+'" class="rolelink">'+a.text+"</a>")});var h=0,i=[],j=rightRule.topicadmin.batchManage;pc.each(j.batchManageSub,function(a,b){userroleJs.verifyRight(a)&&i.push('<a href="'+pageGlobal.root+a.url+'" class="rolelink" data-role="'+b+'">'+a.text+"</a>")});var k=rightRule.topicadmin.viewIP;if(""!=g||i.length>0||userroleJs.verifyRight(k)){if(pc.each(pc.getElems(".floor"),function(a){var b=a.getAttribute("data-pid"),c=a.getAttribute("data-uid"),d='<div class="adminboard cf"><div class="adminboard-cont"><div class="links"></div></div></div>',e=toolJs.domGenerator(d);pc.hasClass(a,"mainfloor")?pc.prependChild(pc.getElem(".mainfloor-bd"),e):pc.getElem(".replyfloor-cont",a).appendChild(e),""!=g&&(pc.getElem(".adminboard-cont .links",a).innerHTML=g,pc.each(pc.getElems(".rolelink",a),function(a){var d={pid:b,uid:c,title:a.innerHTML,url:a.getAttribute("href")};new adminJs(a,d)}))}),i.length>0){var l=i.join("<em>|</em>"),m=toolJs.domGenerator('<div class="adminboard-select"><span class="count">选中<em id="JadminselCount">0</em>篇</span><span class="links"></span><label for="JdatchCheck"><input type="checkbox" name="JdatchCheck" id="JdatchCheck" class="chk" /><span>全选</span></label></div>');pc.getElem(".links",m).innerHTML=l,pc.insertAfter(pc.getElem(".doc"),m);var n=0;pc.each(pc.getElems(".adminboard"),function(a){n++;var b=toolJs.domGenerator('<div class="adminboard-action"><label for="adminck_'+n+'"><input type="checkbox" id="adminck_'+n+'" class="chk chk-adminsel" /><span>管理</span></label></div>');a.appendChild(b),pc.addEvent(pc.getElem(".chk",a),"click",function(){if(this.checked?h++:h--,pc.getElem("#JadminselCount").innerHTML=h,0==h)pc.hide(m);else{var a=toolJs.getOffset(this).top+20,b=toolJs.getOffset(this).left-220;pc.setStyle(m,{top:a+"px",left:b+"px"}),pc.show(m)}h<pc.getElems(".chk-adminsel").length?pc.getElem("#JdatchCheck").checked=!1:pc.getElem("#JdatchCheck").checked=!0})}),pc.addEvent(pc.getElem("#JdatchCheck"),"click",function(){this.checked?(pc.each(pc.getElems(".chk-adminsel"),function(a){a.checked=!0}),h=pc.getElem("#JadminselCount").innerHTML=pc.getElems(".chk-adminsel").length):(pc.each(pc.getElems(".chk-adminsel"),function(a){a.checked=!1}),h=pc.getElem("#JadminselCount").innerHTML=0,pc.hide(m))}),pc.each(pc.getElems(".rolelink",m),function(a){var b={title:"选中${count}篇",url:a.getAttribute("href")};new adminJs(a,b)})}if(userroleJs.verifyRight(k)){var o=pageGlobal.root+topicGlobal.listPostIps+"?tid="+pageGlobal.tid+"&pids="+adminCommon.tool.getPids();pc.get(o,function(a){var b=toolJs.evalJson(a);b.length>0&&pc.each(b,function(a){var b=a.pid,c=commonJs.getElemByData("floor","data-pid",b);if(c&&pc.getElem(".adminboard",c)){var d='<div class="txt"><span>发帖IP: </span><a href="http://whois.pconline.com.cn/whois/?ip='+a.createIp+'" target="_blank">'+a.createIp+'</a><span>最后修改IP: </span><a href="http://whois.pconline.com.cn/whois/?ip='+a.updateIp+'"target="_blank">'+a.updateIp+"</a></div>",e=toolJs.domGenerator(d);pc.prependChild(pc.getElem(".adminboard-cont",c),e)}})})}}}})),function(){var a=200;pc.addEvent(window,"scroll",function(){var b=document.documentElement.scrollTop||document.body.scrollTop;b>a?pc.getElem("#Jguide")&&pc.show(pc.getElem("#Jguide")):pc.getElem("#Jguide")&&pc.hide(pc.getElem("#Jguide"))})}(),function(){function a(a){if(pageGlobal.pagetotal&&parseInt(pageGlobal.pagetotal)>=parseInt(a)){for(var b=pageGlobal.querystring,c={},d=b.split("&"),e="",f=0;f<d.length;f++){var g=d[f].split("=");c[g[0]]=g[1]}var h="";"forum"==pageGlobal.pagetype?(c.filter?"image"==c.filter?e="/image-":"pick"==c.filter?e="/pick-":"type"==c.filter&&c.fval&&(e="/type_"+c.fval+"-"):e="/f",h=c.orderby?pageGlobal.root+pageGlobal.directory+e+pageGlobal.fid+"_"+a+"-"+c.orderby+".html":pageGlobal.root+pageGlobal.directory+e+pageGlobal.fid+"_"+a+".html",c.noPictureMode&&(h+="?noPictureMode="+c.noPictureMode)):"topic"==pageGlobal.pagetype&&(h=c.authorId?pageGlobal.root+pageGlobal.directory+"/topic_"+c.authorId+"-"+pageGlobal.tid+"_"+a+".html":pageGlobal.root+pageGlobal.directory+"/"+pageGlobal.tid+"_"+a+".html"),window.location.href=h}}var b=pc.getElem("#Jpagegoto");b&&pc.addEvent(b,"keyup",function(b){this.value=this.value.replace(/[^\d]/g,""),13==b.keyCode&&""!=this.value&&parseInt(this.value)>0&&a(this.value)}),pageGlobal.pagetotal>1&&pc(document).addEvent("keydown",function(b){"INPUT"!=b.target.tagName&&"TEXTAREA"!=b.target.tagName&&(37==b.keyCode&&pageGlobal.pageno>1&&a(pageGlobal.pageno-1),39==b.keyCode&&pageGlobal.pageno<pageGlobal.pagetotal&&a(pageGlobal.pageno+1))})}();var bdshareJs={init:function(){with(window._bd_share_config={common:{bdSnsKey:{tsina:"2953917903"},bdPic:topicGlobal.sharePicUrl,bdDesc:topicGlobal.topicDescription,bdText:document.title.replace(/([^_]*)_?.*/,"$1")+"（分享自 @太平洋电脑网）",bdSize:26},share:{}},document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion="+~(-new Date/36e5)]}};bdshareJs.init(),pc.browser.ie6&&pc.getScript(commonVar.fixpngSrc,function(){DD_belatedPNG.fix(".png24")});